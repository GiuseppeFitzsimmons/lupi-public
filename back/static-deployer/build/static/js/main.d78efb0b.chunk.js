(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return x}));var r=n(14),a=n(15),o=n(9),c=n.n(o);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var s=Object(r.b)("counter/fetchCount",function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l=Object(r.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(s.pending,(function(e){e.status="loading"})).addCase(s.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),d=l.actions,u=(d.increment,d.decrement,d.incrementByAmount,l.reducer),b=n(38),j=n(50),p=n(31),f=n(54),O=n(55),g=n(56),h=n(45),m=n(20),x=Object(r.a)({reducer:{global:p.a,counter:u,brand:m.c,collection:b.c,product:f.c,login:j.b,fabric:O.d,user:h.c,fourniture:g.d}})},138:function(e,t,n){},139:function(e,t,n){},151:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(22),c=n.n(o),i=(n(138),n(7)),s=(n(139),n(140),n(204)),l=n(25),d=n(10),u=n(27),b=n(17),j=n(6),p=n(20),f=n(38),O=n(54),g=n(55),h=n(56),m=n(205),x=n(45),v=n(1),y=function(e){e.image,e.rtl;var t=e.toggled,n=e.handleToggleSidebar,a=e.setDisplayMode;console.log("menurender");var o=Object(s.a)(),c=Object(j.b)(),p=Object(u.f)(),f=function(){C(!y)},O=Object(r.useState)(!1),x=Object(i.a)(O,2),y=x[0],C=x[1],w=(Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.login)||void 0===t?void 0:t.tokens})),Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.fabric)||void 0===t?void 0:t.fabrics}))),I=localStorage.getItem("currentBrand"),k=Object(j.c)((function(e){var t,n;if(I)return null===e||void 0===e||null===(t=e.brand)||void 0===t||null===(n=t.brands)||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===I}))})),S=Object(j.c)((function(e){var t,n;return I&&null!==e&&void 0!==e&&null!==(t=e.user)&&void 0!==t&&t.users[I]?null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.users[I]:null})),N=Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.collection)||void 0===t?void 0:t.collections})),M=Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.products})),E=Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.fourniture)||void 0===t?void 0:t.fournitures})),T=function(e){},D=function(e){!E||E[e]},B=Object(u.g)();return Object(v.jsxs)(l.c,{collapsed:y,toggled:t,breakPoint:"md",onToggle:n,style:{marginRight:"0x"},children:[Object(v.jsx)(l.f,{style:{textAlign:"right"},children:y?Object(v.jsx)(d.b,{onClick:f}):Object(v.jsx)(d.a,{onClick:f})}),Object(v.jsx)(l.d,{children:Object(v.jsxs)(l.a,{iconShape:"circle",children:[I?Object(v.jsxs)(l.g,{title:Object(v.jsx)(b.b,{to:"/collections/"+I,children:o.formatMessage({id:"collections"})}),icon:Object(v.jsx)(d.h,{}),onOpenChange:function(){return e=I,void(!N||N[e]);var e},active:B.pathname.indexOf(I)>-1,children:[(!N||!N[I])&&Object(v.jsx)(l.b,{children:Object(v.jsx)(m.a,{})}),N&&N[I]&&N[I].map((function(e){return Object(v.jsxs)(l.g,{title:Object(v.jsx)(b.b,{to:"/products/"+I+"/products/"+e.id,children:e.collectionName}),icon:Object(v.jsx)(d.h,{}),onOpenChange:function(){var t;t=e.id,!M||M[t]},active:B.pathname.indexOf(e.id)>-1,children:[(!M||!M[e.id])&&Object(v.jsx)(l.b,{children:Object(v.jsx)(m.a,{})}),M&&M[e.id]&&M[e.id].map((function(t){return Object(v.jsxs)(l.b,{children:[Object(v.jsx)(b.b,{to:"/products/"+I+"/products/"+e.id,replace:!0}),t.productName]},t.id)}))]},e.id)}))]},I):Object(v.jsx)(v.Fragment,{}),I?Object(v.jsxs)(l.g,{title:Object(v.jsx)(b.b,{to:"/fabrics/"+I,children:o.formatMessage({id:"fabrics"})}),icon:Object(v.jsx)(d.h,{}),onOpenChange:T,children:[w&&w.map((function(e){return Object(v.jsx)(l.g,{title:Object(v.jsx)(b.b,{to:"/fabrics/"+e.id,children:e.fabricName}),icon:Object(v.jsx)(d.h,{}),onOpenChange:function(){e.id},active:B.pathname.indexOf(e.id)>-1},e.id)})),!w&&Object(v.jsx)(l.b,{children:Object(v.jsx)(m.a,{})}),Object(v.jsxs)(l.b,{onClick:function(){a("list"),w&&c(Object(g.c)())},children:[o.formatMessage({id:"createFabric"}),Object(v.jsx)(b.b,{to:"/fabrics"})]})]}):Object(v.jsx)(v.Fragment,{}),I?Object(v.jsxs)(l.g,{title:Object(v.jsx)(b.b,{to:"/users/"+I,children:o.formatMessage({id:"users"})}),icon:Object(v.jsx)(d.h,{}),children:[S&&S.map((function(e){var t,n;return console.log("lupimenu user",e),Object(v.jsx)(l.g,{title:Object(v.jsx)(b.b,{to:"/users/"+I,children:null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.id}),icon:Object(v.jsx)(d.h,{}),onOpenChange:function(){return e=I,void(!S||S[e]);var e},active:B.pathname.indexOf(I)>-1},null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)})),!S&&Object(v.jsx)(l.b,{children:Object(v.jsx)(m.a,{})})]}):Object(v.jsx)(v.Fragment,{}),I?Object(v.jsxs)(l.g,{title:Object(v.jsx)(b.b,{to:"/fournitures/"+I,children:o.formatMessage({id:"fournitures"})}),icon:Object(v.jsx)(d.h,{}),onOpenChange:D,children:[E&&Array.isArray(E)&&E.map((function(e){return Object(v.jsx)(l.g,{title:Object(v.jsx)(b.b,{to:"/fournitures/"+e.id,children:e.fournitureName}),icon:Object(v.jsx)(d.h,{}),onOpenChange:function(){return D(e.id)},active:B.pathname.indexOf(e.id)>-1},e.id)})),!E&&Object(v.jsx)(l.b,{children:Object(v.jsx)(m.a,{})}),Object(v.jsxs)(l.b,{onClick:function(){var e;a("list"),c(Object(h.c)({brandId:e}))},children:[o.formatMessage({id:"createFourniture"}),Object(v.jsx)(b.b,{to:"/fournitures"})]})]}):Object(v.jsx)(v.Fragment,{})]})}),Object(v.jsx)(l.e,{style:{textAlign:"center"},children:Object(v.jsxs)("div",{className:"sidebar-btn-wrapper",style:{padding:"20px 24px",cursor:"pointer"},onClick:function(){p.push("/brands/"+k.id)},children:[k&&k.image&&Object(v.jsx)("img",{src:k.image,style:{height:"14px",background:"white",marginRight:"2px"}}),k?k.brandName:""]})})]})},C=(n(151),n(217)),w=n(225),I=n(219),k=n(221),S=n(220),N=n(50),M=n(209),E=n(12),T=n(210),D=n(211),B=n(216),L=n(213),A=n(212),R=n(214),P=n(35),F=n(228),W=n(160),z=n(215),U=Object(M.a)({root:{maxWidth:185,minWidth:185,maxHeight:105},media:{height:60,margin:0}});function _(e){var t=U();return Object(v.jsxs)(T.a,{className:t.root,children:[Object(v.jsx)("div",{style:{width:"100%",height:"1vh",background:e.colour?e.colour:"black"}}),Object(v.jsxs)(D.a,{children:[Object(v.jsx)(A.a,{onClick:e.onClick,className:t.media,image:e.image}),Object(v.jsxs)(L.a,{style:{padding:4},children:[Object(v.jsx)(R.a,{variant:"h6",onClick:e.onClick,children:e.title}),Object(v.jsx)(R.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description}),e.children]})]})]})}var J=n(52),G=(n(40),n(41)),Y=n.n(G),H=n(218),V=(n(47),"/default-avatar.png"),X=Object(M.a)({root:{maxWidth:245,margin:6,fontSize:"1em",position:"relative"},media:{height:120},backdrop:{zIndex:99,color:"#fff",width:"100%",position:"absolute",top:"0",left:"0",height:"100%"},nextImageButton:{position:"relative",left:"92%",bottom:"2%"},nextButton:{position:"relative",right:"-1260%",bottom:"2%"},backButton:{position:"relative",left:"10%",bottom:"2%"},saveButton:{position:"relative",left:"23vw"}});function K(e){var t,n,a=X(),o=Object(s.a)(),c=Object(j.b)(),l=Object(r.useState)(e.brand.brandName),b=Object(i.a)(l,2),f=b[0],O=b[1],g=Object(r.useState)(e.brand.siret),h=Object(i.a)(g,2),m=h[0],x=h[1],y=Object(r.useState)(e.brand.addressLine1),k=Object(i.a)(y,2),S=k[0],N=k[1],M=Object(r.useState)(e.brand.addressLine2),U=Object(i.a)(M,2),G=U[0],K=U[1],q=Object(r.useState)(e.brand.postalCode),Q=Object(i.a)(q,2),$=Q[0],Z=Q[1],ee=Object(r.useState)(e.brand.clientPaymentConditions),te=Object(i.a)(ee,2),ne=te[0],re=te[1],ae=Object(r.useState)(e.brand.operatingCurrency),oe=Object(i.a)(ae,2),ce=oe[0],ie=oe[1],se=Object(r.useState)(e.brand.roundingRules),le=Object(i.a)(se,2),de=le[0],ue=le[1],be=Object(P.a)(),je=Object(i.a)(be,2),pe=je[0],fe=je[1],Oe=Object(j.c)((function(e){var t;return null!==e&&void 0!==e&&null!==(t=e.brand)&&void 0!==t&&t.error?e.brand.error:{}})),ge=Object(r.useState)(Oe),he=Object(i.a)(ge,2),me=he[0],xe=he[1],ve=Object(j.c)((function(t){if(t.brand.status.id===e.brand.id)return"loading"===t.brand.status.status})),ye=function(){if(!f||f.length<1||f.length>256)xe({brandName:"Name cannot be blank"});else{var t=pe||(e.brand.image?e.brand.image:void 0);console.log("imageValue",t),c(Object(p.e)({id:e.brand.id,brandName:f,siret:m,addressLine1:S,addressLine2:G,postalCode:$,clientPaymentConditions:ne,operatingCurrency:ce,roundingRules:de,image:t}))}};Object(r.useEffect)((function(){console.log("loading",ve,"props.brand.editing",e.brand.editing),ve||e.brand.editing||ke(!1)}),[ve]);var Ce=Object(r.useState)(e.brand&&e.brand.editing),we=Object(i.a)(Ce,2),Ie=we[0],ke=we[1],Se=Object(u.f)(),Ne=Object(r.useState)(e.brand.brandName?"DISPLAY":"EDIT"),Me=Object(i.a)(Ne,2),Ee=Me[0],Te=Me[1],De=Object(J.allowedScope)(e.brand.id,"brand:edit"),Be=Object(r.useState)(!1),Le=Object(i.a)(Be,2),Ae=Le[0],Re=Le[1];Object(r.useEffect)((function(){var t=f!==e.brand.brandName||m!==e.brand.siret||S!==e.brand.addressLine1||G!==e.brand.addressLine2||$!==e.brand.postalCode||ne!==e.brand.clientPaymentConditions||ce!==e.brand.operatingCurrency||de!==e.brand.roundingRules||pe!==e.brand.image;Re(t)})),console.log("brandName",f);var Pe=Object(v.jsxs)(T.a,{className:a.root,m:18,children:[Object(v.jsx)(W.a,{className:a.backdrop,open:ve,children:Object(v.jsx)(z.a,{color:"inherit"})}),Object(v.jsxs)(D.a,{children:[Object(v.jsx)(A.a,{className:a.media,image:pe&&pe.source?pe.source:e.brand.image?e.brand.image:V,children:"EDIT"===Ee&&Object(v.jsx)(d.g,{onClick:function(){fe({accept:"image/*"})},style:{position:"absolute",right:"0px",top:"0",fontSize:"2em",color:"rgba(0,0,0,0.5)"}})}),Object(v.jsxs)(L.a,{children:[Object(v.jsx)(w.a,{value:f,autoFocus:!0,disabled:"EDIT"!==Ee,margin:"none",id:"brandName",label:o.formatMessage({id:"brandName"}),type:"text",error:me.brandName,helperText:me.brandName,fullWidth:!0,onChange:function(e){return O(e.target.value)}}),Object(v.jsx)(w.a,{value:m,disabled:"EDIT"!==Ee,margin:"none",id:"siret",label:o.formatMessage({id:"siret"}),type:"text",error:me.siret,helperText:me.siret,fullWidth:!0,onChange:function(e){return x(e.target.value)}}),Object(v.jsx)(w.a,(t={value:S,disabled:"EDIT"!==Ee,margin:"none"},Object(E.a)(t,"margin","addressLine1"),Object(E.a)(t,"id","addressLine1"),Object(E.a)(t,"label",o.formatMessage({id:"addressLine1"})),Object(E.a)(t,"type","text"),Object(E.a)(t,"error",me.addressLine1),Object(E.a)(t,"helperText",me.addressLine1),Object(E.a)(t,"fullWidth",!0),Object(E.a)(t,"onChange",(function(e){return N(e.target.value)})),t)),Object(v.jsx)(w.a,{value:G,disabled:"EDIT"!==Ee,margin:"none",id:"addressLine2",label:o.formatMessage({id:"addressLine2"}),type:"text",error:me.addressLine2,helperText:me.addressLine2,fullWidth:!0,onChange:function(e){return K(e.target.value)}}),Object(v.jsx)(w.a,{value:$,disabled:"EDIT"!==Ee,margin:"none",id:"postalCode",label:o.formatMessage({id:"postalCode"}),type:"text",error:me.postalCode,helperText:me.postalCode,fullWidth:!0,onChange:function(e){return Z(e.target.value)}}),Object(v.jsx)(w.a,{value:ne,disabled:"EDIT"!==Ee,margin:"none",id:"clientPaymentConditions",label:o.formatMessage({id:"clientPaymentConditions"}),type:"text",error:me.clientPaymentConditions,helperText:me.clientPaymentConditions,fullWidth:!0,onChange:function(e){return re(e.target.value)}}),Object(v.jsxs)(w.a,{id:"operatingCurrency",value:ce,disabled:"EDIT"!==Ee,margin:"none",label:o.formatMessage({id:"operatingCurrency"}),onChange:function(e){return ie(e.target.value)},error:me.operatingCurrency,helperText:me.operatingCurrency,select:!0,children:[Object(v.jsx)(F.a,{value:"EU",children:"EU"}),Object(v.jsx)(F.a,{value:"USD",children:"USD"}),Object(v.jsx)(F.a,{value:"UKP",children:"UKP"})]}),Object(v.jsx)(w.a,{value:de,disabled:"EDIT"!==Ee,margin:"none",id:"roundingRules",label:o.formatMessage({id:"roundingRules"}),type:"text",error:me.roundingRules,helperText:me.roundingRules,fullWidth:!0,onChange:function(e){return ue(e.target.value)}})]})]}),Object(v.jsxs)(B.a,{children:["EDIT"===Ee&&Object(v.jsx)(d.i,{color:"primary",onClick:function(){return Te("DETAIL")}}),"EDIT"===Ee&&Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:function(){c(Object(p.a)({id:e.brand.id}))},children:o.formatMessage({id:"delete"})}),"EDIT"===Ee&&Object(v.jsx)(C.a,{size:"small",color:"primary",disabled:!Ae,onClick:ye,children:o.formatMessage({id:"save"})}),Ae,"EDIT"!==Ee&&De&&Object(v.jsx)("div",{children:Object(v.jsx)(d.e,{color:"primary",onClick:function(){return Te("EDIT")}})})]})]}),Fe=Object(r.useState)(),We=Object(i.a)(Fe,2),ze=We[0],Ue=We[1],_e={width:"30vw",height:"50vh"},Je=Object(v.jsx)(H.a,{container:!0,style:{width:"30vw",height:"60vh",overflow:"hidden"},children:Object(v.jsxs)(Y.a,{initialStep:1,instance:Ue,children:[Object(v.jsxs)("div",{style:_e,children:[Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"column",justify:"flex-start",children:[Object(v.jsx)(R.a,{variant:"h8",component:"h8",children:o.formatMessage({id:"selectImageBrandWizard"})}),Object(v.jsx)(A.a,{className:a.media,image:pe&&pe.source?pe.source:e.brand.image?e.brand.image:V,onClick:function(){fe({accept:"image/*"})},style:_e})]}),Object(v.jsx)(H.a,{item:!0,container:!0,direction:"column",justify:"space-between",className:a.nextImageButton,children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.nextStep()},children:Object(v.jsx)(d.d,{})})})})]}),Object(v.jsx)("div",{style:_e,children:Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"row",justify:"flex-start",children:[Object(v.jsx)(R.a,{variant:"h8",component:"h8",children:o.formatMessage({id:"selectNameBrandWizard"})}),Object(v.jsx)(w.a,{value:f,autoFocus:!0,margin:"none",id:"brandName",label:o.formatMessage({id:"brandName"}),type:"text",error:me.brandName,helperText:me.brandName,fullWidth:!0,onChange:function(e){return O(e.target.value)}}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.previousStep()},className:a.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{disabled:!f,onClick:function(){return ze.nextStep()},className:a.nextButton,children:Object(v.jsx)(d.d,{})})})})]})}),Object(v.jsx)("div",{children:Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"row",justify:"flex-start",children:[Object(v.jsx)(w.a,{value:m,margin:"none",id:"siret",label:o.formatMessage({id:"siret"}),type:"text",error:me.siret,helperText:me.siret,fullWidth:!0,onChange:function(e){return x(e.target.value)}}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.previousStep()},className:a.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.nextStep()},className:a.nextButton,children:Object(v.jsx)(d.d,{})})})})]})}),Object(v.jsx)("div",{children:Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"row",justify:"flex-start",children:[Object(v.jsx)(w.a,(n={value:S,margin:"none"},Object(E.a)(n,"margin","addressLine1"),Object(E.a)(n,"id","addressLine1"),Object(E.a)(n,"label",o.formatMessage({id:"addressLine1"})),Object(E.a)(n,"type","text"),Object(E.a)(n,"error",me.addressLine1),Object(E.a)(n,"helperText",me.addressLine1),Object(E.a)(n,"fullWidth",!0),Object(E.a)(n,"onChange",(function(e){return N(e.target.value)})),n)),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.previousStep()},className:a.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.nextStep()},className:a.nextButton,children:Object(v.jsx)(d.d,{})})})})]})}),Object(v.jsx)("div",{children:Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"row",justify:"flex-start",children:[Object(v.jsx)(w.a,{value:G,margin:"none",id:"addressLine2",label:o.formatMessage({id:"addressLine2"}),type:"text",error:me.addressLine2,helperText:me.addressLine2,fullWidth:!0,onChange:function(e){return K(e.target.value)}}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.previousStep()},className:a.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.nextStep()},className:a.nextButton,children:Object(v.jsx)(d.d,{})})})})]})}),Object(v.jsx)("div",{children:Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"row",justify:"flex-start",children:[Object(v.jsx)(w.a,{value:$,margin:"none",id:"postalCode",label:o.formatMessage({id:"postalCode"}),type:"text",error:me.postalCode,helperText:me.postalCode,fullWidth:!0,onChange:function(e){return Z(e.target.value)}}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.previousStep()},className:a.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.nextStep()},className:a.nextButton,children:Object(v.jsx)(d.d,{})})})})]})}),Object(v.jsx)("div",{children:Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"row",justify:"flex-start",children:[Object(v.jsx)(w.a,{value:ne,margin:"none",id:"clientPaymentConditions",label:o.formatMessage({id:"clientPaymentConditions"}),type:"text",error:me.clientPaymentConditions,helperText:me.clientPaymentConditions,fullWidth:!0,onChange:function(e){return re(e.target.value)}}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.previousStep()},className:a.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.nextStep()},className:a.nextButton,children:Object(v.jsx)(d.d,{})})})})]})}),Object(v.jsxs)("div",{children:[Object(v.jsxs)(w.a,{id:"operatingCurrency",value:ce,margin:"none",label:o.formatMessage({id:"operatingCurrency"}),onChange:function(e){return ie(e.target.value)},error:me.operatingCurrency,helperText:me.operatingCurrency,select:!0,children:[Object(v.jsx)(F.a,{value:"EU",children:"EU"}),Object(v.jsx)(F.a,{value:"USD",children:"USD"}),Object(v.jsx)(F.a,{value:"UKP",children:"UKP"})]}),Object(v.jsxs)(H.a,{container:!0,children:[Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.previousStep()},className:a.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.nextStep()},className:a.nextButton,children:Object(v.jsx)(d.d,{})})})})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(w.a,{value:de,margin:"none",id:"roundingRules",label:o.formatMessage({id:"roundingRules"}),type:"text",error:me.roundingRules,helperText:me.roundingRules,fullWidth:!0,onChange:function(e){return ue(e.target.value)}}),Object(v.jsxs)(H.a,{container:!0,children:[Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ze.previousStep()},className:a.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)(C.a,{size:"small",color:"primary",className:a.saveButton,disabled:!Ae,onClick:ye,children:o.formatMessage({id:"save"})})})})]}),Object(v.jsx)(W.a,{className:a.backdrop,open:ve,children:Object(v.jsx)(z.a,{color:"inherit"})})]})]})});return"detail"===e.displayMode?Pe:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_,{image:pe&&pe.source?pe.source:e.brand.image?e.brand.image:V,title:f,onClick:function(){Se.push("/collections/"+e.brand.id)},children:Object(v.jsx)("div",{style:{position:"absolute",left:"2px",top:"2px"},children:Object(v.jsx)(d.f,{color:"primary",onClick:function(){ke(!0)}})})}),Object(v.jsx)(I.a,{onClose:function(){return ke(!1)},open:Ie,children:Object(v.jsxs)(H.a,{children:[Object(v.jsx)(d.j,{onClick:function(){ke(!1)},style:{position:"absolute",zIndex:99}}),Je]})})]})}var q=Object(M.a)((function(e){return{root:{flexGrow:1,overflowX:"scroll",overlfowY:"scroll",padding:"16px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),Q=!1;function $(e){var t=Object(u.f)(),n=q(),r=Object(j.b)(),a=Object(j.c)((function(e){var t;return console.log("brandselector",e),null===e||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brands}));console.log("brandLogger",Q,a),a||Q||(Q=!0,console.log("brandselector dispatch loadBrandsAsync"),r(Object(p.d)()));var o=Object(u.g)().pathname,c=o.substr(o.lastIndexOf("/")+1,o.length);"brands"===c&&(c=!1);Object(s.a)();return Object(v.jsx)("div",{className:n.root,children:Object(v.jsxs)(H.a,{container:!0,spacing:3,style:{height:"95vh"},children:[!a&&Object(v.jsx)(m.a,{}),a&&a.map((function(e){return Object(v.jsx)("button",{onClick:function(){t.push("/collections/"+e.id),r(Object(p.f)(e))},children:e.brandName},e.id)})),!a&&0===(null===a||void 0===a?void 0:a.length)&&Object(v.jsx)(v.Fragment,{children:"NO BRANDS"})]})})}function Z(e){var t=Object(r.useState)(),n=Object(i.a)(t,2),a=n[0],o=n[1],c=Object(j.b)(),l=Object(s.a)(),d=Object(r.useState)(e.shown),b=Object(i.a)(d,2),f=b[0],O=b[1];Object(r.useEffect)((function(){console.log("open",f)}));var g=Object(u.f)(),h=Object(r.useState)(),m=Object(i.a)(h,2),x=m[0],y=m[1],M=Object(r.useState)(),E=Object(i.a)(M,2),T=E[0],D=E[1],B=Object(j.c)((function(e){var t={};return e&&e.login&&e.login.error&&e.login.error.fields?(t.emailError=e.login.error.fields.id,t.passwordError=e.login.error.fields.password):e&&e.login&&e.login.error&&(t.emailError=null===e||void 0===e?void 0:e.login.error.message),console.log("Error state? ",e),t})),L=localStorage.getItem("currentBrand"),A=(Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brands})),Object(r.useCallback)((function(){return g.push("/register")}),[g])),R=function(){c(Object(N.c)({id:T,password:x},r.getState))},P=Object(j.c)((function(e){var t,n,r;return null===e||void 0===e||null===(t=e.login)||void 0===t||null===(n=t.tokens)||void 0===n||null===(r=n.payload)||void 0===r?void 0:r.roles})),F=Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.login)||void 0===t?void 0:t.tokens}));Object(r.useEffect)((function(){console.log("tokens",F),console.log("tokenBrands",P),null!==F&&void 0!==F&&W()}),[F]);var W=function(){console.log("tokenBrands",P),!P||P&&P.length<1?(console.log("nobrands"),O(!1),g.push("/brands"),c(Object(p.b)())):P&&P.length>1?(console.log("manybrands",a),null===a||void 0===a||a.nextStep()):P&&1==P.length&&(console.log("onebrand",P[0]),c(Object(p.f)({id:P[0].brandId})))};return Object(v.jsx)("div",{children:Object(v.jsx)(I.a,{open:!0===f&&!L,onClose:function(){O(!1)},"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,disableEscapeKeyDown:!0,children:Object(v.jsxs)(Y.a,{initialStep:F?2:1,instance:o,children:[Object(v.jsxs)("div",{children:[Object(v.jsxs)(S.a,{style:{minWidth:"20em"},children:[Object(v.jsx)(w.a,{autoFocus:!0,margin:"dense",id:"name",label:l.formatMessage({id:"emailAddress"}),type:"email",error:B.emailError,helperText:B.emailError,fullWidth:!0,onChange:function(e){return D(e.target.value)}}),Object(v.jsx)(w.a,{margin:"dense",id:"name",label:l.formatMessage({id:"password"}),type:"password",error:B.passwordError,helperText:B.passwordError,fullWidth:!0,onChange:function(e){return y(e.target.value)}})]}),Object(v.jsxs)(k.a,{children:[Object(v.jsx)("div",{}),Object(v.jsx)(C.a,{onClick:function(){R()},color:"primary",children:l.formatMessage({id:"login"})})]}),Object(v.jsxs)(k.a,{children:[Object(v.jsx)(C.a,{onClick:function(){O(!1),A()},color:"primary",children:l.formatMessage({id:"register"})}),Object(v.jsx)(C.a,{onClick:R,color:"primary",children:l.formatMessage({id:"forgottenPassword"})})]})]}),Object(v.jsx)("div",{children:F&&!L&&Object(v.jsx)($,{})})]})})})}var ee=n(222),te=n(223),ne=n(30),re=n(224),ae=n(227),oe=n(124),ce=n(120),ie=n.n(ce),se=n(123),le=n.n(se),de=n(122),ue=n.n(de),be=n(121),je=n.n(be),pe=n(31),fe=Object(M.a)((function(e){var t,n;return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(E.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:(t={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ne.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ne.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},Object(E.a)(t,e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),Object(E.a)(t,"minHeight","12px"),Object(E.a)(t,"maxHeight","3vh"),Object(E.a)(t,"marginTop","0"),t),searchIcon:{padding:e.spacing(1,1),height:"1vh",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1px"},inputRoot:{color:"inherit"},inputInput:(n={padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},Object(E.a)(n,e.breakpoints.up("md"),{width:"20ch"}),Object(E.a)(n,"marginTop",0),n),sectionDesktop:Object(E.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(E.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function Oe(e){var t=Object(u.f)(),n=a.a.useState(null),r=Object(i.a)(n,2),o=r[0],c=r[1],l=function(){c(null)},d=fe(),b=Object(s.a)(),f=Object(j.b)();return Object(v.jsx)(ee.a,{position:"static",style:{height:"5vh",width:"100%",backgroundColor:"black",margins:0,padding:0,maxHeight:"4vh"},children:Object(v.jsxs)(te.a,{style:{padding:0,minHeight:"1vh"},children:[Object(v.jsxs)("div",{className:d.search,children:[Object(v.jsx)("div",{className:d.searchIcon,children:Object(v.jsx)(ie.a,{})}),Object(v.jsx)(ae.a,{placeholder:"Search\u2026",classes:{root:d.inputRoot,input:d.inputInput},style:{minHeight:"1vh",maxHeight:"1vh"},inputProps:{"aria-label":"search"}})]}),Object(v.jsx)("div",{className:d.grow}),Object(v.jsxs)("div",{className:d.sectionDesktop,children:[Object(v.jsx)(re.a,{color:"inherit",children:Object(v.jsx)(je.a,{style:{fontSize:".75em",color:"detail"!==e.displayMode?"pink":"white"},onClick:function(){e.setDisplayMode&&e.setDisplayMode("list")}})}),Object(v.jsx)(re.a,{color:"inherit",children:Object(v.jsx)(ue.a,{style:{fontSize:".75em",color:"detail"===e.displayMode?"pink":"white"},onClick:function(){e.setDisplayMode&&e.setDisplayMode("detail")}})}),Object(v.jsx)(re.a,{edge:"end","aria-label":"account of current user","aria-haspopup":"true",color:"inherit",onClick:function(e){c(e.currentTarget)},children:Object(v.jsx)(le.a,{style:{fontSize:".75em"}})})]}),Object(v.jsxs)(oe.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:l,children:[Object(v.jsx)(F.a,{onClick:l,children:b.formatMessage({id:"profile"})}),Object(v.jsx)(F.a,{onClick:function(){f(Object(pe.b)()),c(null),t.push("")},children:b.formatMessage({id:"logOut"})}),Object(v.jsx)(F.a,{onClick:function(){f(Object(p.g)()),l()},children:b.formatMessage({id:"switchBrand"})})]}),Object(v.jsx)("div",{style:{width:"2vh"}})]})})}function ge(e){var t=Object(s.a)(),n=Object(u.f)(),a=Object(r.useCallback)((function(){return n.push("/register")}),[n]);return Object(v.jsxs)("main",{style:{padding:0},children:["This is the 'about' screen.",Object(v.jsx)("br",{}),!e.loggedIn&&Object(v.jsx)(C.a,{onClick:a,color:"primary",children:t.formatMessage({id:"register"})})]})}n(76);var he=Object(M.a)({root:{maxWidth:345},media:{height:180}});function me(e){var t,a,o=he(),c=Object(s.a)(),l=Object(u.f)(),b=Object(j.b)();Object(j.c)((function(e){console.log("state",e),e&&e.login&&e.login.fields&&(t=null===e||void 0===e?void 0:e.login.error.fields.email,a=null===e||void 0===e?void 0:e.login.error.fields.email)}));var p=Object(r.useCallback)((function(){return l.push("/about")}),[l]),f=Object(P.a)(),O=Object(i.a)(f,2),g=O[0],h=O[1],m=(n(76),Object(r.useState)()),x=Object(i.a)(m,2),y=x[0],I=x[1],k=Object(r.useState)(),S=Object(i.a)(k,2),M=S[0],E=S[1],F=Object(r.useState)(),W=Object(i.a)(F,2),z=(W[0],W[1]),U=Object(r.useState)(),_=Object(i.a)(U,2),J=_[0],G=_[1],Y=Object(r.useState)(),H=Object(i.a)(Y,2),V=H[0],X=H[1];return Object(v.jsxs)(T.a,{className:o.root,children:[Object(v.jsxs)(D.a,{children:["register"!==e.mode&&Object(v.jsx)(A.a,{className:o.media,image:g&&g.source?g.source:".public/default-avatar.png",children:Object(v.jsx)(d.g,{onClick:function(){h({accept:"image/*"})},style:{position:"absolute",right:"0px",top:"0",fontSize:"2em",color:"rgba(0,0,0,0.5)"}})}),Object(v.jsxs)(L.a,{children:["register"===e.mode&&Object(v.jsx)(R.a,{variant:"h5",component:"h2",children:c.formatMessage({id:"createAccount"})}),Object(v.jsx)(w.a,{autoFocus:!0,margin:"dense",id:"email",label:c.formatMessage({id:"emailAddress"}),type:"email",error:t,helperText:t,fullWidth:!0,onChange:function(e){return I(e.target.value)}}),Object(v.jsx)(w.a,{autoFocus:!0,margin:"dense",id:"password",label:c.formatMessage({id:"password"}),type:"password",error:a,helperText:a,fullWidth:!0,onChange:function(e){return E(e.target.value)}}),Object(v.jsx)(w.a,{autoFocus:!0,margin:"dense",id:"password2",label:c.formatMessage({id:"passwordAgain"}),type:"password",error:a,helperText:a,fullWidth:!0,onChange:function(e){return z(e.target.value)}}),Object(v.jsx)(w.a,{autoFocus:!0,margin:"dense",id:"firstName",label:c.formatMessage({id:"firstName"}),type:"text",fullWidth:!0,onChange:function(e){return G(e.target.value)}}),Object(v.jsx)(w.a,{autoFocus:!0,margin:"dense",id:"lastName",label:c.formatMessage({id:"lastName"}),type:"text",fullWidth:!0,onChange:function(e){return X(e.target.value)}})]})]}),Object(v.jsxs)(B.a,{children:[Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:p,children:c.formatMessage({id:"cancel"})}),"register"===e.mode&&Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:function(){b(Object(N.d)({firstName:J,lastName:V,id:y,password:M}))},children:c.formatMessage({id:"register"})})]})]})}var xe=Object(M.a)({root:{maxWidth:345},media:{height:180}});function ve(){xe(),Object(s.a)();var e=Object(u.f)();Object(j.b)();Object(j.c)((function(e){console.log("state",e),e&&e.login&&e.login.fields&&(null===e||void 0===e?void 0:e.login.error.fields.email,null===e||void 0===e?void 0:e.login.error.fields.email)}));Object(r.useCallback)((function(){return e.push("/about")}),[e]);var t=Object(P.a)(),a=Object(i.a)(t,2),o=(a[0],a[1],n(76),Object(r.useState)()),c=Object(i.a)(o,2),l=(c[0],c[1],Object(r.useState)()),d=Object(i.a)(l,2),b=(d[0],d[1],Object(r.useState)()),p=Object(i.a)(b,2),f=(p[0],p[1],Object(r.useState)()),O=Object(i.a)(f,2),g=(O[0],O[1],Object(r.useState)()),h=Object(i.a)(g,2);h[0],h[1];return Object(v.jsx)("main",{children:Object(v.jsx)(me,{mode:"register"})})}var ye=Object(M.a)((function(e){return{root:{flexGrow:1,overflowX:"scroll",overlfowY:"scroll",padding:"16px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function Ce(e){var t=ye(),n=Object(j.b)(),r=Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brands}));r||n(Object(p.d)());var a=Object(u.g)().pathname,o=a.substr(a.lastIndexOf("/")+1,a.length);"brands"===o&&(o=!1);var c=Object(s.a)();return Object(v.jsx)("div",{className:t.root,children:Object(v.jsxs)(H.a,{container:!0,spacing:3,style:{height:"95vh"},children:[r&&r.map((function(t){return Object(v.jsx)(K,{brand:t,displayMode:e.displayMode},t.id)})),(!r||0===(null===r||void 0===r?void 0:r.length))&&Object(v.jsx)(_,{image:"/default-avatar.png",title:c.formatMessage({id:"createBrand"}),onClick:function(){e.setDisplayMode("detail"),n(Object(p.b)())}})]})})}var we=Object(M.a)({root:{maxWidth:245,margin:6,fontSize:"1em",position:"relative"},media:{height:120},backdrop:{zIndex:99,color:"#fff",width:"100%",position:"absolute",top:"0",left:"0",height:"100%"}});function Ie(e){var t=Object(u.f)(),n=we(),a=Object(s.a)(),o=Object(j.b)(),c=Object(r.useState)(e.collection.collectionName),l=Object(i.a)(c,2),b=l[0],p=l[1],O=Object(r.useState)(e.collection.deliveryDate),g=Object(i.a)(O,2),h=g[0],m=g[1],x=Object(r.useState)(e.collection.markup),y=Object(i.a)(x,2),k=y[0],S=y[1],N=Object(j.c)((function(e){return{}})),M=Object(j.c)((function(t){var n,r,a,o,c;if((null===t||void 0===t||null===(n=t.collection)||void 0===n||null===(r=n.status)||void 0===r?void 0:r.id)===(null===e||void 0===e||null===(a=e.collection)||void 0===a?void 0:a.id))return"loading"===(null===t||void 0===t||null===(o=t.collection)||void 0===o||null===(c=o.status)||void 0===c?void 0:c.status)})),E=Object(r.useState)(e.collection.collectionName?"DISPLAY":"EDIT"),A=Object(i.a)(E,2),R=A[0],P=A[1],F=Object(J.allowedScope)(e.collection.brandId,"collection:edit"),U=Object(r.useState)(!1),G=Object(i.a)(U,2),Y=G[0],H=G[1],V=Object(j.c)((function(t){var n,r;return null===t||void 0===t||null===(n=t.brand)||void 0===n||null===(r=n.brands)||void 0===r?void 0:r.find((function(t){return t.id===e.collection.brandId}))})),X=Object(r.useState)(!1),K=Object(i.a)(X,2),q=K[0],Q=K[1];Object(r.useEffect)((function(){var t=b!==e.collection.collectionName||h!==e.collection.deliveryDate||k!==e.collection.markup;Q(t)}));var $=Object(v.jsxs)(T.a,{className:n.root,m:18,children:[Object(v.jsx)(W.a,{className:n.backdrop,open:M,children:Object(v.jsx)(z.a,{color:"inherit"})}),Object(v.jsx)(D.a,{children:Object(v.jsxs)(L.a,{children:[Object(v.jsx)(w.a,{value:b,autoFocus:!0,disabled:"EDIT"!==R,margin:"none",id:"collectionName",label:a.formatMessage({id:"collectionName"}),type:"text",error:N.collectionName,helperText:N.collectionName,fullWidth:!0,onChange:function(e){return p(e.target.value)}}),Object(v.jsx)(w.a,{value:h,disabled:"EDIT"!==R,margin:"none",id:"deliveryDate",label:a.formatMessage({id:"deliveryDate"}),InputLabelProps:{shrink:!0},type:"date",error:N.deliveryDate,helperText:N.deliveryDate,fullWidth:!0,onChange:function(e){return m(e.target.value)}}),Object(v.jsx)(w.a,{value:k,disabled:"EDIT"!==R,margin:"none",id:"markup",label:a.formatMessage({id:"markup"}),type:"text",error:N.markup,helperText:N.markup,fullWidth:!0,onChange:function(e){return S(e.target.value)}})]})}),Object(v.jsxs)(B.a,{children:["EDIT"===R&&Object(v.jsx)(d.i,{color:"primary",onClick:function(){return P("DETAIL")}}),"EDIT"===R&&Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:function(){o(Object(f.a)({collection:e.collection}))},children:a.formatMessage({id:"delete"})}),"EDIT"===R&&Object(v.jsx)(C.a,{size:"small",color:"primary",disabled:!q,onClick:function(){o(Object(f.e)({id:e.collection.id,collectionName:b,deliveryDate:h,markup:k,brandId:e.collection.brandId}))},children:a.formatMessage({id:"save"})}),"EDIT"!==R&&F&&Object(v.jsx)("div",{children:Object(v.jsx)(d.e,{color:"primary",onClick:function(){return P("EDIT")}})})]})]}),Z=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_,{image:V&&V.image?V.image:"/default-avatar.png",colour:"purple",title:b,onClick:function(){t.push("/products/"+V.id+"/products/"+e.collection.id)},children:Object(v.jsx)("div",{style:{position:"absolute",left:"2px",top:"2px"},children:Object(v.jsx)(d.f,{color:"primary",onClick:function(){H(!0)}})})}),Object(v.jsxs)(I.a,{onClose:function(){return H(!1)},open:Y,children:[Object(v.jsx)(d.j,{onClick:function(){return H(!1)},style:{position:"absolute",zIndex:99}}),Object(v.jsx)("div",{style:{overflowY:"scroll"},children:$})]})]});return"detail"===e.displayMode?$:Z}function ke(e){var t=Object(j.b)(),n=localStorage.getItem("currentBrand"),r=Object(j.c)((function(e){var t,r;if(console.log("CurrentBrandHeader",e.brand),n)return null===e||void 0===e||null===(t=e.brand)||void 0===t||null===(r=t.brands)||void 0===r?void 0:r.find((function(e){return e.id===n}))}));return r||t(Object(p.d)()),Object(v.jsxs)("div",{style:{marginLeft:"0px",width:"100%",background:"black",marginBottom:"10px",color:"white",padding:"2px"},children:[r&&Object(v.jsx)("img",{src:r.image,style:{height:"14px",background:"white",marginRight:"2px"}}),r?r.brandName:""]})}var Se=Object(M.a)((function(e){return{root:{flexGrow:1,overflowX:"scroll",overlfowY:"scroll",padding:"16px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function Ne(e){var t,n=Se(),r=Object(j.b)(),a=Object(u.g)().pathname,o=a.substr(a.lastIndexOf("/")+1,a.length);t=a.lastIndexOf("products")>-1?a.substr(a.indexOf("collections/")+12,a.lastIndexOf("/products")-13):a.substr(a.indexOf("collections/")+12,a.length),console.log("aaa brandId",t);var c=Object(j.c)((function(e){var n;if(null!==e&&void 0!==e&&null!==(n=e.collection)&&void 0!==n&&n.collections)return e.collection.collections[t]}));c||(console.log("aaa loading collections, brandId:",t),r(Object(f.d)({brandId:t}))),Object(j.c)((function(e){var n;if(null!==e&&void 0!==e&&null!==(n=e.brand)&&void 0!==n&&n.brands)return e.brand.brands.find((function(e){return e.id===t}))}))||r(Object(p.d)());Object(j.c)((function(e){var t,n;if(null!==e&&void 0!==e&&null!==(t=e.product)&&void 0!==t&&t.products)return null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.products[o]}));var i=Object(s.a)();return Object(v.jsxs)("div",{className:n.root,children:[Object(v.jsx)(ke,{}),Object(v.jsxs)(H.a,{container:!0,spacing:3,style:{height:"95vh",padding:"12px"},children:[c&&c.map((function(t){return Object(v.jsx)(Ie,{collection:t,displayMode:e.displayMode},t.id)})),(!c||c&&0===c.length)&&Object(v.jsx)(v.Fragment,{children:"noCollections"}),Object(v.jsx)(_,{image:"/default-avatar.png",colour:"purple",title:i.formatMessage({id:"createCollection"}),onClick:function(){e.setDisplayMode("detail"),r(Object(f.b)({brandId:t}))}})]},"collectionGrid")]})}var Me=Object(M.a)({root:{maxWidth:245,margin:6,fontSize:"1em",position:"relative"},media:{height:120},backdrop:{zIndex:99,color:"#fff",width:"100%",position:"absolute",top:"0",left:"0",height:"100%"},nextImageButton:{position:"relative",left:"92%",bottom:"2%"},nextButton:{position:"relative",right:"-1260%",bottom:"2%"},backButton:{position:"relative",left:"10%",bottom:"2%"},saveButton:{position:"relative",left:"23vw"}});function Ee(e){Object(u.f)();var t=Me(),n=Object(s.a)(),a=Object(j.b)(),o=Object(r.useState)(e.product.productName),c=Object(i.a)(o,2),l=c[0],b=c[1],p=Object(j.c)((function(e){return{}})),f=Object(j.c)((function(t){if(t.product.status.id===e.product.id)return"loading"===t.product.status.status})),g=function(){a(Object(O.e)({id:e.product.id,productName:l,collectionId:e.product.collectionId}))},h=Object(r.useState)(e.product.productName?"DISPLAY":"EDIT"),m=Object(i.a)(h,2),x=m[0],y=m[1],k=Object(J.allowedScope)(e.product.collectionId,"collection:edit"),S=Object(r.useState)(!1),N=Object(i.a)(S,2),M=N[0],E=N[1],F="/default-avatar.png";Object(j.c)((function(e){var t;console.log("state?.collection?.collections",null===e||void 0===e||null===(t=e.collection)||void 0===t?void 0:t.collections)}));console.log("PRODUCT VIEW",e.product);var U=Object(r.useState)(!1),G=Object(i.a)(U,2),V=G[0],X=G[1];Object(r.useEffect)((function(){var t=l!==e.product.productName;X(t)}));var K=Object(P.a)(),q=Object(i.a)(K,2),Q=q[0],$=q[1],Z=Object(v.jsxs)(T.a,{className:t.root,m:18,children:[Object(v.jsx)(W.a,{className:t.backdrop,open:f,children:Object(v.jsx)(z.a,{color:"inherit"})}),Object(v.jsx)(D.a,{children:Object(v.jsx)(L.a,{children:Object(v.jsx)(w.a,{value:l,autoFocus:!0,disabled:"EDIT"!==x,margin:"none",id:"productName",label:n.formatMessage({id:"productName"}),type:"text",error:p.productName,helperText:p.productName,fullWidth:!0,onChange:function(e){return b(e.target.value)}})})}),Object(v.jsxs)(B.a,{children:["EDIT"===x&&Object(v.jsx)(d.i,{color:"primary",onClick:function(){return y("DETAIL")}}),"EDIT"===x&&Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:function(){a(Object(O.a)({product:e.product}))},children:n.formatMessage({id:"delete"})}),"EDIT"===x&&Object(v.jsx)(C.a,{size:"small",color:"primary",disabled:!V,onClick:g,children:n.formatMessage({id:"save"})}),"EDIT"!==x&&k&&Object(v.jsx)("div",{children:Object(v.jsx)(d.e,{color:"primary",onClick:function(){return y("EDIT")}})})]})]}),ee=Object(r.useState)(),te=Object(i.a)(ee,2),ne=te[0],re=te[1],ae={width:"30vw",height:"50vh"},oe=Object(v.jsx)(H.a,{container:!0,style:{width:"30vw",height:"60vh",overflow:"hidden"},children:Object(v.jsxs)(Y.a,{initialStep:1,instance:re,children:[Object(v.jsxs)("div",{style:ae,children:[Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"column",justify:"flex-start",children:[Object(v.jsx)(R.a,{variant:"h8",component:"h8",children:n.formatMessage({id:"selectImageProductWizard"})}),Object(v.jsx)(A.a,{className:t.media,image:Q&&Q.source?Q.source:e.product.image?e.product.image:F,onClick:function(){$({accept:"image/*"})},style:ae})]}),Object(v.jsx)(H.a,{item:!0,container:!0,direction:"column",justify:"space-between",className:t.nextImageButton,children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ne.nextStep()},children:Object(v.jsx)(d.d,{})})})})]}),Object(v.jsx)("div",{style:ae,children:Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"row",justify:"flex-start",children:[Object(v.jsx)(R.a,{variant:"h8",component:"h8",children:n.formatMessage({id:"selectNameProductWizard"})}),Object(v.jsx)(w.a,{value:l,autoFocus:!0,margin:"none",id:"productName",label:n.formatMessage({id:"productName"}),type:"text",error:p.productName,helperText:p.productName,fullWidth:!0,onChange:function(e){return b(e.target.value)}}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ne.previousStep()},className:t.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{disabled:!l,onClick:function(){return ne.nextStep()},className:t.nextButton,children:Object(v.jsx)(d.d,{})})})})]})}),Object(v.jsxs)("div",{children:[Object(v.jsx)(w.a,{value:"roundingRules",margin:"none",id:"roundingRules",label:n.formatMessage({id:"roundingRules"}),type:"text",error:p.roundingRules,helperText:p.roundingRules,fullWidth:!0,onChange:function(e){return console.log("changed rounding rules")}}),Object(v.jsxs)(H.a,{container:!0,children:[Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ne.previousStep()},className:t.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)(C.a,{size:"small",color:"primary",className:t.saveButton,disabled:!V,onClick:g,children:n.formatMessage({id:"save"})})})})]}),Object(v.jsx)(W.a,{className:t.backdrop,open:f,children:Object(v.jsx)(z.a,{color:"inherit"})})]})]})});return"detail"===e.displayMode?Z:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_,{image:Q&&Q.source?Q.source:e.product.image?e.product.image:F,title:l,onClick:function(){},children:Object(v.jsx)("div",{style:{position:"absolute",left:"2px",top:"2px"},children:Object(v.jsx)(d.f,{color:"primary",onClick:function(){E(!0)}})})}),Object(v.jsx)(I.a,{onClose:function(){return E(!1)},open:M,children:Object(v.jsxs)(H.a,{children:[Object(v.jsx)(d.j,{onClick:function(){E(!1),console.log("showEditorDialogue")},style:{position:"absolute",zIndex:99}}),oe]})})]})}var Te=Object(M.a)((function(e){return{root:{flexGrow:1,overflowX:"scroll",overlfowY:"scroll",padding:"16px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function De(e){var t=Te(),n=Object(j.b)(),r=Object(u.g)().pathname;Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brands}))||n(Object(p.d)());var a=r.substr(r.lastIndexOf("/")+1,r.length),o=r.substr(r.indexOf("products/")+9,r.lastIndexOf("/products")-10),c=Object(j.c)((function(e){var t;if(console.log("PRODUCTS",e.product),null!==e&&void 0!==e&&null!==(t=e.product)&&void 0!==t&&t.products)return console.log("state.product.products[collectionId]",e.product.products[a]),e.product.products[a]}));c||n(Object(O.d)({collectionId:a}));Object(j.c)((function(e){var t,n,r={};if(null!==e&&void 0!==e&&null!==(t=e.collection)&&void 0!==t&&t.collections[o]&&(null===e||void 0===e||null===(n=e.collection)||void 0===n?void 0:n.collections[o].length)>0)for(var c in null===e||void 0===e||null===(i=e.collection)||void 0===i?void 0:i.collections[o]){var i,s,l;if((null===e||void 0===e||null===(s=e.collection)||void 0===s?void 0:s.collections[o][c].id)==a)r=null===e||void 0===e||null===(l=e.collection)||void 0===l?void 0:l.collections[o][c]}return r}));var i=Object(s.a)();return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)(ke,{}),Object(v.jsxs)(H.a,{container:!0,spacing:3,style:{height:"95vh",padding:"12px"},children:[c&&c.map((function(t){return Object(v.jsx)(Ee,{product:t,displayMode:e.displayMode},t.id)})),(!c||c&&0===c.length)&&Object(v.jsx)(_,{image:"/default-avatar.png",colour:"purple",title:i.formatMessage({id:"createProduct"}),onClick:function(){n(Object(O.b)({collectionId:a}))}})]})]})}var Be="/default-avatar.png",Le=Object(M.a)({root:{maxWidth:245,margin:6,fontSize:"1em",position:"relative"},media:{height:120},backdrop:{zIndex:99,color:"#fff",width:"100%",position:"absolute",top:"0",left:"0",height:"100%"},nextImageButton:{position:"relative",left:"92%",bottom:"2%"},nextButton:{position:"relative",right:"-1260%",bottom:"2%"},backButton:{position:"relative",left:"10%",bottom:"2%"},saveButton:{position:"relative",left:"23vw"}});function Ae(e){var t=Le(),n=Object(s.a)(),a=Object(j.b)(),o=Object(r.useState)(e.fabric.fabricName),c=Object(i.a)(o,2),l=c[0],b=c[1],p=Object(P.a)(),f=Object(i.a)(p,2),O=f[0],h=f[1],m=Object(j.c)((function(e){var t;return null!==e&&void 0!==e&&null!==(t=e.fabric)&&void 0!==t&&t.error?e.fabric.error:{}})),x=Object(r.useState)(m),y=Object(i.a)(x,2),k=y[0],S=y[1],N=Object(j.c)((function(t){if(t.fabric.status.id===e.fabric.id)return"loading"===t.fabric.status.status})),M=function(){if(!l||l.length<1||l.length>256)S({fabricName:"Name cannot be blank"});else{var t=O||(e.fabric.image?e.fabric.image:void 0);console.log("imageValue",t),a(Object(g.f)({id:e.fabric.id,image:t,fabricName:l,brandId:e.fabric.brandId}))}};Object(r.useEffect)((function(){console.log("loading",N,"props.fabric.editing",e.fabric.editing),N||e.fabric.editing||G(!1)}),[N]);var E=Object(r.useState)(e.fabric&&e.fabric.editing),F=Object(i.a)(E,2),U=F[0],G=F[1],V=Object(u.f)(),X=Object(r.useState)(e.fabric.fabricName?"DISPLAY":"EDIT"),K=Object(i.a)(X,2),q=K[0],Q=K[1],$=Object(J.allowedScope)(e.fabric.brandId,"fabric:edit"),Z=(Object(j.c)((function(t){var n,r;return null===t||void 0===t||null===(n=t.brand)||void 0===n||null===(r=n.brands)||void 0===r?void 0:r.find((function(t){return t.id===e.fabric.brandId}))})),Object(r.useState)(!1)),ee=Object(i.a)(Z,2),te=ee[0],ne=ee[1];Object(r.useEffect)((function(){var t=l!==e.fabric.fabricName||O!==e.fabric.image;ne(t)})),console.log("fabricName",l);var re=Object(v.jsxs)(T.a,{className:t.root,m:18,children:[Object(v.jsx)(W.a,{className:t.backdrop,open:N,children:Object(v.jsx)(z.a,{color:"inherit"})}),Object(v.jsxs)(D.a,{children:[Object(v.jsx)(A.a,{className:t.media,image:O&&O.source?O.source:e.fabric.image?e.fabric.image:Be,children:"EDIT"===q&&Object(v.jsx)(d.g,{onClick:function(){h({accept:"image/*"})},style:{position:"absolute",right:"0px",top:"0",fontSize:"2em",color:"rgba(0,0,0,0.5)"}})}),Object(v.jsx)(L.a,{children:Object(v.jsx)(w.a,{value:l,autoFocus:!0,disabled:"EDIT"!==q,margin:"none",id:"fabricName",label:n.formatMessage({id:"fabricName"}),type:"text",error:k.fabricName,helperText:k.fabricName,fullWidth:!0,onChange:function(e){return b(e.target.value)}})})]}),Object(v.jsxs)(B.a,{children:["EDIT"===q&&Object(v.jsx)(d.i,{color:"primary",onClick:function(){return Q("DETAIL")}}),"EDIT"===q&&Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:function(){a(Object(g.a)({id:e.fabric.id}))},children:n.formatMessage({id:"delete"})}),"EDIT"===q&&Object(v.jsx)(C.a,{size:"small",color:"primary",disabled:!te,onClick:M,children:n.formatMessage({id:"save"})}),te,"EDIT"!==q&&$&&Object(v.jsx)("div",{children:Object(v.jsx)(d.e,{color:"primary",onClick:function(){return Q("EDIT")}})})]})]}),ae=Object(r.useState)(),oe=Object(i.a)(ae,2),ce=oe[0],ie=oe[1],se={width:"30vw",height:"50vh"},le=Object(v.jsx)(H.a,{container:!0,style:{width:"30vw",height:"60vh",overflow:"hidden"},children:Object(v.jsxs)(Y.a,{initialStep:1,instance:ie,children:[Object(v.jsxs)("div",{style:se,children:[Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"column",justify:"flex-start",children:[Object(v.jsx)(R.a,{variant:"h8",component:"h8",children:n.formatMessage({id:"selectImageFabricWizard"})}),Object(v.jsx)(A.a,{className:t.media,image:O&&O.source?O.source:e.fabric.image?e.fabric.image:Be,onClick:function(){h({accept:"image/*"})},style:se})]}),Object(v.jsx)(H.a,{item:!0,container:!0,direction:"column",justify:"space-between",className:t.nextImageButton,children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ce.nextStep()},children:Object(v.jsx)(d.d,{})})})})]}),Object(v.jsx)("div",{style:se,children:Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"row",justify:"flex-start",children:[Object(v.jsx)(R.a,{variant:"h8",component:"h8",children:n.formatMessage({id:"selectNameFabricWizard"})}),Object(v.jsx)(w.a,{value:l,autoFocus:!0,margin:"none",id:"fabricName",label:n.formatMessage({id:"fabricName"}),type:"text",error:k.fabricName,helperText:k.fabricName,fullWidth:!0,onChange:function(e){return b(e.target.value)}}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ce.previousStep()},className:t.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)(C.a,{size:"small",color:"primary",className:t.saveButton,disabled:!te,onClick:M,children:n.formatMessage({id:"save"})})})})]})})]})});return"detail"===e.displayMode?Object(v.jsx)(v.Fragment,{children:re}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_,{image:O&&O.source?O.source:e.fabric.image?e.fabric.image:Be,title:l,onClick:function(){V.push("/fabrics/"+e.brand.id)},children:Object(v.jsx)("div",{style:{position:"absolute",left:"2px",top:"2px"},children:Object(v.jsx)(d.f,{color:"primary",onClick:function(){G(!0)}})})}),Object(v.jsx)(I.a,{onClose:function(){return G(!1)},open:U,children:Object(v.jsxs)(H.a,{children:[Object(v.jsx)(d.j,{onClick:function(){G(!1)},style:{position:"absolute",zIndex:99}}),le]})})]})}var Re=Object(M.a)((function(e){return{root:{flexGrow:1,overflowX:"scroll",overlfowY:"scroll",padding:"16px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function Pe(e){var t=Re(),n=Object(j.b)(),r=Object(u.g)().pathname,a=r.substr(r.lastIndexOf("/")+1,r.length);"fabrics"===a&&(a=!1);var o=Object(j.c)((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.fabric)&&void 0!==t&&t.fabrics)return console.log("fabricslog",e.fabric.fabrics),e.fabric.fabrics[a]}));o||n(Object(g.e)({brandId:a}));Object(j.c)((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.brand)&&void 0!==t&&t.brands)return e.brand.brands.find((function(e){return e.id===a}))}));var c=Object(s.a)();return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)(ke,{}),Object(v.jsxs)(H.a,{container:!0,spacing:3,style:{height:"95vh"},children:[o&&o.map((function(t){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Ae,{fabric:t,displayMode:e.displayMode},t.id)})})),Object(v.jsx)(_,{image:"/default-avatar.png",title:c.formatMessage({id:"createFabric"}),onClick:function(){e.setDisplayMode("detail"),n(Object(g.b)({brandId:a}))}})]})]})}var Fe=Object(M.a)({root:{maxWidth:345},media:{height:180}});function We(e){var t,a,o=Fe(),c=Object(s.a)(),l=Object(u.f)(),d=Object(j.b)();Object(j.c)((function(e){e&&e.login&&e.login.fields&&(a=null===e||void 0===e?void 0:e.login.error.fields.email,null===e||void 0===e?void 0:e.login.error.fields.email)}));var b=Object(r.useCallback)((function(){d(Object(x.a)({user:{brandId:O,id:null===W||void 0===W?void 0:W.id}}))}),[l]),p=Object(P.a)(),f=Object(i.a)(p,2),O=(f[0],f[1],n(76),localStorage.getItem("currentBrand")),g=Object(j.c)((function(e){return e.brand.brands})),h=Object(r.useState)(),m=Object(i.a)(h,2),y=m[0],I=m[1],k=Object(r.useState)(),S=Object(i.a)(k,2),M=S[0],E=S[1],A=Object(j.c)((function(e){return e.login.newUser})),W=e.user;return console.log("props.user",e.user),1==(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.editing)?Object(v.jsxs)(T.a,{className:o.root,children:[Object(v.jsx)(D.a,{children:Object(v.jsxs)(L.a,{children:["register"===e.mode&&Object(v.jsx)(R.a,{variant:"h5",component:"h2",children:c.formatMessage({id:"createAccount"})}),Object(v.jsx)(w.a,{autoFocus:!0,margin:"dense",id:"email",label:c.formatMessage({id:"emailAddress"}),type:"email",error:a,helperText:a,fullWidth:!0,onChange:function(e){return E(e.target.value)}}),Object(v.jsx)(w.a,{id:"brand",margin:"none",label:c.formatMessage({id:"brand"}),onChange:function(e){return I(e.target.value)},select:!0,children:g&&g.map((function(e){return Object(v.jsx)(F.a,{value:e.id,children:e.brandName},e.id)}))})]})}),Object(v.jsxs)(B.a,{children:[Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:b,children:c.formatMessage({id:"cancel"})}),Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:function(){e.setDisplayMode("register"),d(Object(N.a)({email:M,brand:y}))},children:c.formatMessage({id:"register"})})]}),A&&Object(v.jsxs)(v.Fragment,{children:["New user ",A.id,"'s temporary password is ",A.password]})]}):Object(v.jsxs)(T.a,{className:o.root,children:[Object(v.jsx)(D.a,{children:Object(v.jsx)(L.a,{children:Object(v.jsx)("div",{children:null!==W&&void 0!==W&&W.id?null===W||void 0===W?void 0:W.id:"new user"})})}),Object(v.jsx)(B.a,{children:Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:function(){var e;console.log("handleDelete",W),e=null===W||void 0===W?void 0:W.id,console.log("deleting user",e,"with currentBrandId",O),d(Object(x.d)({id:e,currentBrandId:O}))},children:c.formatMessage({id:"delete"})})})]})}var ze=Object(M.a)((function(e){return{root:{flexGrow:1,overflowX:"scroll",overlfowY:"scroll",padding:"16px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function Ue(e){var t=ze(),n=Object(j.b)(),r=Object(u.g)().pathname;Object(j.c)((function(e){var t;return null===e||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brands}))||n(Object(p.d)());var a=r.substr(r.lastIndexOf("/")+1,r.length);console.log("brandId",a);var o=Object(j.c)((function(e){if(console.log("USERS",e.user.users[a]),null!==e&&void 0!==e&&e.user)return e.user.users[a]}));o||n(Object(x.e)({brandId:a})),Object(j.c)((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.brand)&&void 0!==t&&t.brands){var n={};for(var r in null===e||void 0===e||null===(o=e.brand)||void 0===o?void 0:o.brands){var o,c;n=null===e||void 0===e||null===(c=e.brand)||void 0===c?void 0:c.brands.find((function(e){return e.id===a}))}return n}}))||n(Object(p.d)({brandId:a}));var c=Object(s.a)();return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)(ke,{}),Object(v.jsxs)(H.a,{container:!0,spacing:3,style:{height:"95vh",padding:"12px"},children:[Object(v.jsx)(_,{image:"/default-avatar.png",colour:"purple",title:c.formatMessage({id:"createUser"}),onClick:function(){e.setDisplayMode("register"),n(Object(x.b)({brandId:a}))}}),o&&o.map((function(t){return console.log("usermap",t,"from users",o),Object(v.jsx)(We,{user:t,displayMode:e.displayMode,setDisplayMode:e.setDisplayMode},t.id)}))]})]})}var _e="/default-avatar.png",Je=Object(M.a)({root:{maxWidth:245,margin:6,fontSize:"1em",position:"relative"},media:{height:120},backdrop:{zIndex:99,color:"#fff",width:"100%",position:"absolute",top:"0",left:"0",height:"100%"},nextImageButton:{position:"relative",left:"92%",bottom:"2%"},nextButton:{position:"relative",right:"-1260%",bottom:"2%"},backButton:{position:"relative",left:"10%",bottom:"2%"},saveButton:{position:"relative",left:"23vw"}});function Ge(e){var t=Je(),n=Object(s.a)(),a=Object(j.b)(),o=Object(r.useState)(e.fourniture.fournitureName),c=Object(i.a)(o,2),l=c[0],b=c[1],p=Object(P.a)(),f=Object(i.a)(p,2),O=f[0],g=f[1],m=Object(j.c)((function(e){var t;return null!==e&&void 0!==e&&null!==(t=e.fourniture)&&void 0!==t&&t.error?e.fourniture.error:{}})),x=Object(r.useState)(m),y=Object(i.a)(x,2),k=y[0],S=y[1],N=Object(j.c)((function(t){if(t.fourniture.status.id===e.fourniture.id)return"loading"===t.fourniture.status.status})),M=function(){if(!l||l.length<1||l.length>256)S({fournitureName:"Name cannot be blank"});else{var t=O||(e.fourniture.image?e.fourniture.image:void 0);console.log("imageValue",t),a(Object(h.f)({id:e.fourniture.id,image:t,fournitureName:l,brandId:e.fourniture.brandId}))}};Object(r.useEffect)((function(){console.log("loading",N,"props.fourniture.editing",e.fourniture.editing),N||e.fourniture.editing||G(!1)}),[N]);var E=Object(r.useState)(e.fourniture&&e.fourniture.editing),F=Object(i.a)(E,2),U=F[0],G=F[1],V=Object(u.f)(),X=Object(r.useState)(e.fourniture.fournitureName?"DISPLAY":"EDIT"),K=Object(i.a)(X,2),q=K[0],Q=K[1],$=Object(J.allowedScope)(e.fourniture.brandId,"fourniture:edit"),Z=(Object(j.c)((function(t){var n,r;return null===t||void 0===t||null===(n=t.brand)||void 0===n||null===(r=n.brands)||void 0===r?void 0:r.find((function(t){return t.id===e.fourniture.brandId}))})),Object(r.useState)(!1)),ee=Object(i.a)(Z,2),te=ee[0],ne=ee[1];Object(r.useEffect)((function(){var t=l!==e.fourniture.fournitureName||O!==e.fourniture.image;ne(t)})),console.log("fournitureName",l);var re=Object(v.jsxs)(T.a,{className:t.root,m:18,children:[Object(v.jsx)(W.a,{className:t.backdrop,open:N,children:Object(v.jsx)(z.a,{color:"inherit"})}),Object(v.jsxs)(D.a,{children:[Object(v.jsx)(A.a,{className:t.media,image:O&&O.source?O.source:e.fourniture.image?e.fourniture.image:_e,children:"EDIT"===q&&Object(v.jsx)(d.g,{onClick:function(){g({accept:"image/*"})},style:{position:"absolute",right:"0px",top:"0",fontSize:"2em",color:"rgba(0,0,0,0.5)"}})}),Object(v.jsx)(L.a,{children:Object(v.jsx)(w.a,{value:l,autoFocus:!0,disabled:"EDIT"!==q,margin:"none",id:"fournitureName",label:n.formatMessage({id:"fournitureName"}),type:"text",error:k.fournitureName,helperText:k.fournitureName,fullWidth:!0,onChange:function(e){return b(e.target.value)}})})]}),Object(v.jsxs)(B.a,{children:["EDIT"===q&&Object(v.jsx)(d.i,{color:"primary",onClick:function(){return Q("DETAIL")}}),"EDIT"===q&&Object(v.jsx)(C.a,{size:"small",color:"primary",onClick:function(){a(Object(h.a)({id:e.fourniture.id}))},children:n.formatMessage({id:"delete"})}),"EDIT"===q&&Object(v.jsx)(C.a,{size:"small",color:"primary",disabled:!te,onClick:M,children:n.formatMessage({id:"save"})}),te,"EDIT"!==q&&$&&Object(v.jsx)("div",{children:Object(v.jsx)(d.e,{color:"primary",onClick:function(){return Q("EDIT")}})})]})]}),ae=Object(r.useState)(),oe=Object(i.a)(ae,2),ce=oe[0],ie=oe[1],se={width:"30vw",height:"50vh"},le=Object(v.jsx)(H.a,{container:!0,style:{width:"30vw",height:"60vh",overflow:"hidden"},children:Object(v.jsxs)(Y.a,{initialStep:1,instance:ie,children:[Object(v.jsxs)("div",{style:se,children:[Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"column",justify:"flex-start",children:[Object(v.jsx)(R.a,{variant:"h8",component:"h8",children:n.formatMessage({id:"selectImageFournitureWizard"})}),Object(v.jsx)(A.a,{className:t.media,image:O&&O.source?O.source:e.fourniture.image?e.fourniture.image:_e,onClick:function(){g({accept:"image/*"})},style:se})]}),Object(v.jsx)(H.a,{item:!0,container:!0,direction:"column",justify:"space-between",className:t.nextImageButton,children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ce.nextStep()},children:Object(v.jsx)(d.d,{})})})})]}),Object(v.jsx)("div",{style:se,children:Object(v.jsxs)(H.a,{item:!0,container:!0,direction:"row",justify:"flex-start",children:[Object(v.jsx)(R.a,{variant:"h8",component:"h8",children:n.formatMessage({id:"selectNameFournitureWizard"})}),Object(v.jsx)(w.a,{value:l,autoFocus:!0,margin:"none",id:"fournitureName",label:n.formatMessage({id:"fournitureName"}),type:"text",error:k.fournitureName,helperText:k.fournitureName,fullWidth:!0,onChange:function(e){return b(e.target.value)}}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)("button",{onClick:function(){return ce.previousStep()},className:t.backButton,children:Object(v.jsx)(d.c,{})})})}),Object(v.jsx)(H.a,{item:!0,direction:"row",justify:"space-between",children:Object(v.jsx)("p",{children:Object(v.jsx)(C.a,{size:"small",color:"primary",className:t.saveButton,disabled:!te,onClick:M,children:n.formatMessage({id:"save"})})})})]})})]})});return"detail"===e.displayMode?Object(v.jsx)(v.Fragment,{children:re}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_,{image:O&&O.source?O.source:e.fourniture.image?e.fourniture.image:_e,title:l,onClick:function(){V.push("/fournitures/"+e.brand.id)},children:Object(v.jsx)("div",{style:{position:"absolute",left:"2px",top:"2px"},children:Object(v.jsx)(d.f,{color:"primary",onClick:function(){G(!0)}})})}),Object(v.jsx)(I.a,{onClose:function(){return G(!1)},open:U,children:Object(v.jsxs)(H.a,{children:[Object(v.jsx)(d.j,{onClick:function(){G(!1)},style:{position:"absolute",zIndex:99}}),le]})})]})}var Ye=Object(M.a)((function(e){return{root:{flexGrow:1,overflowX:"scroll",overlfowY:"scroll",padding:"16px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function He(e){var t=Ye(),n=Object(j.b)(),r=Object(u.g)().pathname,a=r.substr(r.lastIndexOf("/")+1,r.length);"fournitures"===a&&(a=!1);var o=Object(j.c)((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.fourniture)&&void 0!==t&&t.fournitures)return console.log("fournitureslog",e.fourniture.fournitures),e.fourniture.fournitures[a]}));o||n(Object(h.e)({brandId:a}));Object(j.c)((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.brand)&&void 0!==t&&t.brands)return e.brand.brands.find((function(e){return e.id===a}))}));var c=Object(s.a)();return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)(ke,{}),Object(v.jsxs)(H.a,{container:!0,spacing:3,style:{height:"95vh"},children:[o&&o.map((function(t){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Ge,{fourniture:t,displayMode:e.displayMode},t.id)})})),Object(v.jsx)(_,{image:"/default-avatar.png",title:c.formatMessage({id:"createFourniture"}),onClick:function(){e.setDisplayMode("detail"),n(Object(h.b)({brandId:a}))}})]})]})}n(153);var Ve=function(){Object(j.b)();var e=Object(j.c)((function(e){var t=localStorage.getItem("tokens");return console.log("is logged in ",JSON.parse(t),null!=t),null!=t})),t=localStorage.getItem("currentBrand");console.log("currentBrand",t);var n=Object(r.useState)("fr"),a=Object(i.a)(n,2),o=(a[0],a[1],Object(r.useState)(!1)),c=Object(i.a)(o,2),l=(c[0],c[1],Object(u.g)().pathname),d=(Object(s.a)(),Object(r.useState)("list")),b=Object(i.a)(d,2),p=b[0],f=b[1];return Object(r.useEffect)((function(){console.log("displayMode",p)}),[p]),console.log("showLogger",(!0!==e||!t)&&"/register"!==l,"loggedIn",e,"currentBrandId",t),Object(v.jsxs)("div",{className:"app ",style:{width:"100%"},children:[(!0!==e||!t)&&"/register"!==l&&Object(v.jsx)(Z,{shown:(!0!==e||!t)&&"/register"!==l}),Object(v.jsx)(y,{setDisplayMode:f}),Object(v.jsxs)("div",{style:{width:"100%"},children:[Object(v.jsx)("div",{children:Object(v.jsx)(Oe,{setDisplayMode:f,displayMode:p})}),Object(v.jsx)("div",{children:Object(v.jsxs)(u.c,{children:[Object(v.jsx)(u.a,{path:"/about",children:Object(v.jsx)(ge,{})}),Object(v.jsx)(u.a,{path:"/brands",children:Object(v.jsx)(Ce,{displayMode:p,setDisplayMode:f})}),Object(v.jsx)(u.a,{path:"/collections",children:Object(v.jsx)(Ne,{displayMode:p,setDisplayMode:f})}),Object(v.jsx)(u.a,{path:"/products",children:Object(v.jsx)(De,{displayMode:p,setDisplayMode:f})}),Object(v.jsx)(u.a,{path:"/fabrics",children:Object(v.jsx)(Pe,{displayMode:p,setDisplayMode:f})}),Object(v.jsx)(u.a,{path:"/fournitures",children:Object(v.jsx)(He,{displayMode:p,setDisplayMode:f})}),Object(v.jsx)(u.a,{path:"/users",children:Object(v.jsx)(Ue,{displayMode:p,setDisplayMode:f})}),Object(v.jsxs)(u.a,{path:"/register",children:[!e&&Object(v.jsx)(ve,{}),e&&Object(v.jsx)(ge,{loggedIn:e})]}),Object(v.jsx)(u.a,{path:"/users",children:Object(v.jsx)(ge,{loggedIn:e})}),Object(v.jsx)(u.a,{path:"/",children:Object(v.jsxs)("div",{children:["location ",l]})})]})})]})]})},Xe=n(107),Ke=n(226),qe={en:{title:"Lupi",sidebarTitle:"Pro Sidebar",login:"Log in to Lupi",emailAddress:"Email address",password:"Password",passwordAgain:"Repeat password",forgottenPassword:"Forgotten password",createBrand:"Create brand",createCollection:"Create collection",createFabric:"Create fabric",brands:"Brands",createAccount:"Create account",firstName:"First name",lastName:"Last name",cancel:"Cancel",register:"Register with Lupi",description:"React sidebar library with dropdown menus and unlimited number of nested submenus",dashboard:"Dashboard",components:"Components",dropdown:"Dropdown",submenu:"Submenu",multiLevel:"Multi Level",collapsed:"Collapsed",rtl:"RTL",image:"Background image",new:"NEW",withPrefix:"With Prefix",withSuffix:"With Suffix",logOut:"Log out",profile:"Profile",edit:"Edit",save:"Save",delete:"Delete",roundingRules:"Rounding rules",operatingCurrency:"Operating currency",clientPaymentConditions:"Client payment conditions",postalCode:"Postal code",addressLine1:"Address",addressLine2:"Address line 2",siret:"Siret",brandName:"Brand name",markup:"Markup",deliveryDate:"Delivery date",collectionName:"Collection name",selectImageBrandWizard:"You can select an image for your brand (but you don't have to)",selectNameBrandWizard:"Select a name for your brand",fabrics:"Fabrics",users:"Users",addUser:"Add user",collections:"Collections",switchBrand:"Switch brand"}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(v.jsxs)(a.a.StrictMode,{children:[Object(v.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),Object(v.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),Object(v.jsx)(b.a,{children:Object(v.jsx)(Ke.a,{locale:"en",messages:qe.en,children:Object(v.jsx)(j.a,{store:Xe.store,children:Object(v.jsx)(Ve,{})})})})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},20:function(e,t,n){"use strict";n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return v}));var r=n(15),a=n(9),o=n.n(a),c=n(14),i=n(21),s=n(58),l=n(31),d=n(47),u={brands:void 0,status:"idle",error:void 0},b=function(e){var t=d.getEnvironment(window.location.origin);e.image&&"string"===typeof e.image&&0!==e.image.indexOf("http")&&(e.image=t.imageServer+e.image)},j=Object(c.b)("brand/save",Object(r.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.getEnvironment(window.location.origin),n={id:Object(s.a)(),operatingCurrency:t.currency,roundingRules:t.roundingRules,clientPaymentConditions:t.clientPaymentConditions,editing:!0},e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))),p=Object(c.b)("brand/create",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saving brand",t),null!==t&&void 0!==t&&t.editing&&delete t.editing,e.next=4,Object(i.b)({resource:"brand",brandId:t.id,params:t});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=Object(c.b)("brand/load",Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)({resource:"brand"});case 2:return t=e.sent,console.log("brands result",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))),O=Object(c.c)({name:"brand",initialState:u,reducers:{createBrand:function(e,t){e.brands||(e.brands=[]);var n=d.getEnvironment(window.location.origin),r={id:Object(s.a)(),operatingCurrency:n.currency,roundingRules:n.roundingRules,clientPaymentConditions:n.clientPaymentConditions,editing:!0};e.brands.push(r),t.brand=r,e.currentBrand=r},setBrandCurrent:function(e,t){console.log("testBrand",t.payload),e.currentBrand=t.payload,localStorage.setItem("currentBrand",t.payload.id)},cancel:function(e,t){e.brands&&(e.brands=e.brands.filter((function(e){return e.id!==t.payload.id}))),Object(i.a)({resource:"brand",method:"delete",params:{id:t.payload.id}})},setCurrentBrand:function(e,t){console.log("setting ",t.payload.brand," as current brand"),e.currentBrand||(e.currentBrand={}),localStorage.setItem("currentBrand",t.payload.brand),e.currentBrand=t.payload.brand},switchBrand:function(e,t){console.log("switching brands"),localStorage.removeItem("currentBrand"),delete e.currentBrand}},extraReducers:function(e){e.addCase(j.pending,(function(e,t){console.log("saveAsync",e,t),e.status={id:t.meta.arg.id,status:"loading"}})).addCase(p.fulfilled,(function(e,t){e.brands||(e.brands=[]),e.brands.push(t.payload),localStorage.setItem("currentBrand",t.payload.id)})).addCase(j.fulfilled,(function(e,t){e.error&&delete e.error,e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode?(console.log("action.payload",t.payload),delete t.payload.responseCode,b(t.payload.brand),e.brands?e.brands=e.brands.map((function(e){return e.id===t.payload.brand.id?t.payload.brand:e})):e.brands=[t.payload.brand]):e.error=t.payload.error})).addCase(f.fulfilled,(function(e,t){e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode?(console.log("loading brands",t.payload),delete t.payload.responseCode,e.brands?t.payload.brands.forEach((function(t){e.brands.find((function(e){return e.id===t.id}))||e.brands.push(t)})):(e.brands=t.payload.brands,console.log("state.brands",e.brands)),e.brands.forEach((function(e){b(e)}))):e.error=t.payload})).addCase(l.b,(function(e,t){console.log("logout deleting currentBrand",e.currentBrand),delete e.currentBrand}))}}),g=O.actions,h=g.createBrand,m=g.cancel,x=(g.setCurrentBrand,g.setBrandCurrent),v=g.switchBrand;t.c=O.reducer},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return p}));var r,a=n(15),o=n(9),c=n.n(o),i={token:"/token",user:"/user",brand:"/brand",signedurl:"/signedurl",collection:"/collection",product:"/product",fabric:"/fabric",branduser:"/branduser",role:"/role",fourniture:"/fourniture"},s=n(47),l=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r);case 2:return r=Promise.resolve().then(n.bind(null,107)).then((function(e){return e})).catch((function(e){console.log("error loading store in serverCalls")})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=localStorage.getItem("tokens");if(e)try{return JSON.parse(e)}catch(t){}},u=function(){var e=d();if(e)return e.accessToken},b=function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("tokens","object"===typeof t?JSON.stringify(t):t),e.next=3,l();case 3:e.sent.getState().login.tokens=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a,o,l,d,b,O,g,h,m,x;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u(),r=s.getEnvironment(window.location.origin),a=t.resource,o=t.params,l=!1,"object"!==typeof o){e.next=15;break}e.t0=c.a.keys(o);case 7:if((e.t1=e.t0()).done){e.next=14;break}if(d=e.t1.value,!(b=o[d])||!b.source){e.next=12;break}return e.delegateYield(c.a.mark((function e(){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={resource:"signedurl",params:{fileName:b.name}},t.brandId&&(n.params.brandId=t.brandId),e.next=4,p(n);case 4:return r=e.sent,a={method:"PUT",headers:{"Content-Type":r.contentType},body:b.file},e.next=8,new Promise((function(e,t){fetch(r.url,a).then((function(t){console.log("UPLOADBUG sucess",t.responseCode),e(t.responseCode)})).catch((function(e){console.log("UPLOADBUG failure",e),t(e)}))}));case 8:o[d]=r.key;case 9:case"end":return e.stop()}}),e)}))(),"t2",12);case 12:e.next=7;break;case 14:o=JSON.stringify(o);case 15:return"setpw"===t.resource&&(n=t.params.token),O=0,g="POST",t.update?g="PUT":t.delete&&(g="DELETE"),(h={}).Authorization=n,h.Accept="application/json, text/plain, */*",l||(h["Content-Type"]="application/json"),m={method:g,credentials:"same-origin",headers:h,body:o},console.log("postToServer",r.url+i[a]),e.next=27,fetch(r.url+i[a],m).then((function(e){return console.log("response.status",e.status),O=e.status,e.json()})).then((function(e){return e})).catch((function(e){return console.log("postToServer err",e),O=0,{}}));case 27:if(x=e.sent,401!==O||"exp"!==x.code||t.retry){e.next=35;break}return e.next=31,f();case 31:return t.retry=!0,e.next=34,j(t);case 34:return e.abrupt("return",e.sent);case 35:return x.responseCode=O,console.log("server reply",x),e.abrupt("return",x);case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a,o,l,d,b,j,O,g,h,m,x;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("questObject",t),n=u(),r=s.getEnvironment(window.location.origin),a=t.resource,o=t.params,l=0,d=r.url+i[a],o)for(j in b=Object.keys(o),d+="?",b)if(O=b[j],g=o[O],Array.isArray(g))for(h in g)d+="&"+O+"="+g[h];else d+="&"+O+"="+g;return m={method:t.method?t.method:"GET",credentials:"same-origin",headers:{Authorization:n,Accept:"application/json, text/plain, */*","Content-Type":"application/json"}},console.log("getFromServer",d,m),e.next=12,fetch(d,m).then((function(e){return l=e.status,console.log("getFromServer response",e),e.json()})).then((function(e){return console.log("getFromServer then",e),e}));case 12:if(x=e.sent,401!==l||"exp"!==x.code||t.retry){e.next=23;break}return console.log("getFromServer failed with expired token, retrying"),e.next=17,f();case 17:return t.retry=!0,e.next=20,p(t);case 20:return e.abrupt("return",e.sent);case 23:return x.responseCode=l,e.abrupt("return",x);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function f(){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(c.a.mark((function e(){var t,n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=d())&&(t=n.refreshToken),r={resource:"login",params:{grant_type:"refresh",token:t}},e.next=6,j(r);case 6:if(200===(a=e.sent).responseCode||201===a.responseCode){e.next=11;break}console.log("failed to refresh token TODO clear the storage, return to login"),e.next=14;break;case 11:return console.log("token is refreshed, storing new tokens in local storage"),e.next=14,b(a);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},31:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(14),a=Object(r.c)({name:"global",initialState:{},reducers:{logout:function(e){console.log("GLOBAL LOGOUT CALLED")}}}),o=a.actions.logout;t.a=a.reducer},38:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return O}));var r=n(15),a=n(9),o=n.n(a),c=n(14),i=n(21),s=n(58),l=n(31),d=(n(47),{collections:{},error:void 0}),u=Object(c.b)("collection/save",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saveCollectionAsync",t),e.next=3,Object(i.b)({resource:"collection",params:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=Object(c.b)("collection/create",function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:Object(s.a)(),brandId:t.brandId});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(c.b)("collection/load",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)({resource:"collection",params:{brandId:t.brandId,siblingId:t.collectionId}});case 2:return n=e.sent,console.log("COLLECITONS FROM SERVER",n),n.brandId=t.brandId,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(c.c)({name:"collection",initialState:d,reducers:{cancelCreateCollection:function(e,t){console.log("cancelCreateCollection",t.payload),console.log("cancelCreateCollection",e.collections[t.payload.collection.brandId]),e.collections&&e.collections[t.payload.collection.brandId]&&(e.collections[t.payload.collection.brandId]=e.collections[t.payload.collection.brandId].filter((function(e){return e.id!==t.payload.collection.id}))),Object(i.a)({resource:"collection",method:"delete",params:{id:t.payload.collection.id}})}},extraReducers:function(e){e.addCase(u.pending,(function(e,t){console.log("saveCollectionAsync",e,t),e.status={id:t.meta.arg.id,status:"loading"}})).addCase(b.fulfilled,(function(e,t){e.collections||(e.collections={}),e.collections[t.payload.brandId]||(e.collections[t.payload.brandId]=[]),e.collections[t.payload.brandId].push(t.payload)})).addCase(u.fulfilled,(function(e,t){e.error&&delete e.error,e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode?(console.log("action.payload",t.payload),delete t.payload.responseCode,e.collections[t.payload.collection.brandId]?e.collections[t.payload.collection.brandId]=e.collections[t.payload.collection.brandId].map((function(e){return e.id===t.payload.collection.id?t.payload.collection:e})):e.collections[t.payload.collection.brandId]=[t.payload.collection],console.log("so now ",t.payload.collection.brandId,"is ",e.collections[t.payload.collection.brandId])):e.error=t.payload})).addCase(j.fulfilled,(function(e,t){var n;(e.status="idle",console.log("loading collections",t.payload),t.payload.responseCode<202&&0!==t.payload.responseCode)?(delete t.payload.responseCode,(!e.collections||typeof(null===e||void 0===e?void 0:e.products)!=Array||(null===e||void 0===e||null===(n=e.products)||void 0===n?void 0:n.length)<=0)&&(e.collections=[]),e.collections[t.payload.brandId]?t.payload.collections.forEach((function(n){e.collections[t.payload.brandId].find((function(e){return e.id===n.id}))||e.collections[t.payload.brandId].push(n)})):e.collections[t.payload.brandId]=t.payload.collections):e.error=t.payload})).addCase(l.b,(function(e,t){e.collections={}}))}}),f=p.actions,O=(f.createCollection,f.cancelCreateCollection);t.c=p.reducer},45:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"e",(function(){return j})),n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return g}));var r=n(15),a=n(9),o=n.n(a),c=n(14),i=n(21),s=n(58),l=n(31),d=(n(47),{users:{},error:void 0}),u=Object(c.b)("user/save",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.editing&&delete t.editing,e.next=3,Object(i.b)({resource:"user",params:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=Object(c.b)("user/create",function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:Object(s.a)(),brandId:t.brandId,editing:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(c.b)("user/load",function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)({resource:"user",params:{brandId:t.brandId}});case 2:if(n=e.sent,console.log("USERS FROM SERVER",n),n.brandId=t.brandId,n.users){for(a in r=[],n.users)r.push(n.users[a].user);n[t.brandId]=r}return console.log("LOADED USERS",n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(c.c)({name:"user",initialState:d,reducers:{createUser:function(e,t){var n,r;(console.log("CREATE USER",t.payload),e.users||(e.users={}),e.users[null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.brandId])||(e.users[null===t||void 0===t||null===(r=t.payload)||void 0===r?void 0:r.brandId]=[]);e.users[t.payload.brandId].push({id:Object(s.a)(),brandId:t.payload.brandId,editing:!0})},cancelCreateUser:function(e,t){e.users&&e.users[t.payload.user.brandId]&&(e.users[t.payload.user.brandId]=e.users[t.payload.user.brandId].filter((function(e){var n;return(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.id)!=t.payload.user.id}))),Object(i.a)({resource:"user",method:"delete",params:{id:t.payload.user.id}})},deleteUserRole:function(e,t){for(var n in e.users[t.payload.currentBrandId])e.users[t.payload.currentBrandId][n].user.id==t.payload.id&&delete e.users[t.payload.currentBrandId][n];Object(i.a)({resource:"role",method:"delete",params:{userId:t.payload.id,brandId:t.payload.currentBrandId}})}},extraReducers:function(e){e.addCase(u.pending,(function(e,t){console.log("saveUserAsync",e,t),e.status={id:t.meta.arg.id,status:"loading"}})).addCase(b.fulfilled,(function(e,t){e.users||(e.users={}),e.users[t.payload.brandId]||(e.users[t.payload.brandId]=[]),e.users[t.payload.brandId].push(t.payload)})).addCase(u.fulfilled,(function(e,t){e.error&&delete e.error,e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode?(console.log("action.payload",t.payload),delete t.payload.responseCode,e.users[t.payload.user.brandId]?e.users[t.payload.user.brandId]=e.users[t.payload.user.brandId].map((function(e){return e.id===t.payload.user.id?t.payload.user:e})):e.users[t.payload.user.brandId]=[t.payload.user],console.log("so now ",t.payload.user.brandId,"is ",e.users[t.payload.user.brandId])):e.error=t.payload})).addCase(j.fulfilled,(function(e,t){e.status="idle",console.log("loading users",t.payload),t.payload.responseCode<202&&0!==t.payload.responseCode?(delete t.payload.responseCode,e.users||(e.users=[]),t.payload[t.payload.brandId]?(null!==e&&void 0!==e&&e.users[t.payload.brandId]||(e.users[t.payload.brandId]=[]),t.payload.users.forEach((function(n){e.users[t.payload.brandId].find((function(e){return e.id===n.id}))||e.users[t.payload.brandId].push(n)}))):(console.log("action.payload.users",t.payload.users),e.users[t.payload.brandId]=t.payload.users)):e.error=t.payload})).addCase(l.b,(function(e,t){e.users={}}))}}),f=p.actions,O=(f.createUser,f.cancelCreateUser),g=f.deleteUserRole;t.c=p.reducer},47:function(e,t){e.exports={server:{url:"https://www-lupi.lupi.studio/v1",googleLogin:"https://accounts.google.com/o/oauth2/v2/auth?scope=profile email&access_type=offline&include_granted_scopes=true&state=state_parameter_passthrough_value&redirect_uri=https://api.flashgang.io/v1/googleauth&response_type=code&client_id=979434939914-mmo8birn7i0okdb888crfjej7mpj1q66.apps.googleusercontent.com",imageServer:"",currency:"EU",roundingRules:"2",clientPaymentConditions:"30"},devServer:{url:"https://www-lupi.lupi.studio/v1",googleLogin:"https://accounts.google.com/o/oauth2/v2/auth?scope=profile email&access_type=offline&include_granted_scopes=true&state=state_parameter_passthrough_value&redirect_uri=https://api-dev.flashgang.io/v1/googleauth&response_type=code&client_id=979434939914-mmo8birn7i0okdb888crfjej7mpj1q66.apps.googleusercontent.com",imageServer:"",currency:"EU",roundingRules:"2",clientPaymentConditions:"30"},local:{url:"http://localhost:8080/v1",googleLogin:"https://accounts.google.com/o/oauth2/v2/auth?scope=profile email&access_type=offline&include_granted_scopes=true&state=state_parameter_passthrough_value&redirect_uri=http://localhost:8080/googleauth&response_type=code&client_id=979434939914-mmo8birn7i0okdb888crfjej7mpj1q66.apps.googleusercontent.com",imageServer:"https://www-lupi.lupi.studio/",currency:"EU",roundingRules:"2",clientPaymentConditions:"30"},getEnvironment:function(e){return e.toLowerCase().indexOf("local")>-1||e.indexOf("127")>-1?this.local:e.toLowerCase().indexOf("dev.flashgang")>-1?this.devServer:this.server}}},50:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return j}));var r=n(15),a=n(9),o=n.n(a),c=n(14),i=n(21),s=n(20),l=n(31),d={tokens:void 0,status:"idle",error:void 0,actionQueue:[]},u=Object(c.b)("login/register",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("login registerAsync user ",t),e.next=3,Object(i.b)({resource:"user",params:{firstName:t.firstName,lastName:t.lastName,password:t.password,id:t.id}});case 3:return n=e.sent,console.log("login registerAsync response",n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=Object(c.b)("login/branduser",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("login brandUserAsync user ",t),e.next=3,Object(i.b)({resource:"branduser",params:{email:t.email,brand:t.brand}});case 3:return n=e.sent,console.log("login brandUserAsync response",n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(c.b)("login/token",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("login loginSync user ",t),t.grant_type="password",e.next=4,Object(i.b)({resource:"token",params:t});case 4:return n=e.sent,console.log("login loginAsync response",n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(c.c)({name:"login",initialState:d,reducers:{increment:function(e){e.value+=1}},extraReducers:function(e){e.addCase(b.pending,(function(e){console.log("loading brandUser"),e.status="loading"})).addCase(b.fulfilled,(function(e,t){if(console.log("done brandUser"),e.error&&delete e.error,e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode){console.log("action.payload",t.payload);var n={id:t.payload.id,password:t.payload.password};e.newUser=n}else e.error=t.payload})).addCase(u.pending,(function(e){console.log("loading register"),e.status="loading"})).addCase(u.fulfilled,(function(e,t){if(console.log("done register",t.payload),e.error&&delete e.error,e.status="idle",t.payload.responseCode<202){var n={accessToken:t.payload.access_token,refreshToken:t.payload.refresh_token};n.payload=JSON.parse(atob(n.accessToken.split(".")[1])),localStorage.setItem("tokens",JSON.stringify(n)),e.tokens=n}else e.error=t.payload})).addCase(j.pending,(function(e){e.status="loading"})).addCase(j.fulfilled,(function(e,t){if(e.error&&delete e.error,e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode){var n={accessToken:t.payload.access_token,refreshToken:t.payload.refresh_token};n.payload=JSON.parse(atob(n.accessToken.split(".")[1])),localStorage.setItem("tokens",JSON.stringify(n)),e.tokens=n}else e.error=t.payload})).addCase(s.e.fulfilled,(function(e,t){401===t.payload.responseCode&&(delete e.tokens,localStorage.removeItem("tokens"))})).addCase(s.d.fulfilled,(function(e,t){401===t.payload.responseCode&&(delete e.tokens,localStorage.removeItem("tokens"))})).addCase(l.b,(function(e,t){console.log("LOGINSLICE LOGOUT CALLED"),localStorage.clear(),delete e.tokens})).addCase(s.b,(function(e,t){if(t.brand){var n=localStorage.getItem("tokens");if(n){n=JSON.parse(n);var r={brandId:t.brand.id,name:"ADMIN",allowedScopes:["*:*"]};n.payload.roles||(n.payload.roles=[]),n.payload.roles.push(r),localStorage.setItem("tokens",JSON.stringify(n)),e.tokens=n}}}))}});t.b=p.reducer},52:function(e,t){function n(e,t){var n={allowedScopes:[],disallowedScope:[]};return e.roles.forEach((function(e){e.brandId===t&&(e.allowedScopes&&(n.allowedScopes=Object.assign(n.allowedScopes,e.allowedScopes)),e.disallowedScope&&(n.disallowedScope=Object.assign(n.disallowedScope,e.disallowedScope)))})),n}e.exports={getScopesForBrand:n,allowedScope:function(e,t){var r,a=localStorage.getItem("tokens");a&&(r=(a=JSON.parse(a)).payload);var o=!1;if(!r)return!1;var c=n(r,e),i=t.split(":"),s=i[0],l=i[1];return c.allowedScopes.forEach((function(e){var t=e.split(":"),n=t[0],r=t[1];"*"!==n&&n!==s||"*"!==r&&r!==l||(o=!0)})),c.disallowedScope.forEach((function(e){var t=e.split(":"),n=t[0],r=t[1];"*"!==n&&n!==s||"*"!==r&&r!==l||(o=!1)})),o}}},54:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return O}));var r=n(15),a=n(9),o=n.n(a),c=n(14),i=n(21),s=n(58),l=n(31),d=(n(47),{products:{},error:void 0}),u=Object(c.b)("product/save",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)({resource:"product",params:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=Object(c.b)("product/create",function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:Object(s.a)(),collectionId:t.collectionId});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(c.b)("product/load",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)({resource:"product",params:{collectionId:t.collectionId,siblingId:t.productId}});case 2:return n=e.sent,console.log("PRODUCTS FROM SERVER",n),n.collectionId=t.collectionId,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(c.c)({name:"product",initialState:d,reducers:{createProduct:function(e,t){console.log("CREATE PRODUCT",t.payload),e.products||(e.products={}),e.products[t.payload.collectionId]||(e.products[t.payload.collectionId]=[]),e.products[t.payload.collectionId].push({id:t.payload.id,collectionId:t.payload.collectionId}),console.log("CREATE PRODUCT",t.payload.collectionId,e.products[t.payload.collectionId])},cancelCreateProduct:function(e,t){console.log("cancelCreateProduct",t.payload),console.log("cancelCreateProduct",e.products[t.payload.product.collectionId]),e.products&&e.products[t.payload.product.collectionId]&&(e.products[t.payload.product.collectionId]=e.products[t.payload.product.collectionId].filter((function(e){return e.id!==t.payload.product.id}))),Object(i.a)({resource:"product",method:"delete",params:{id:t.payload.id}})}},extraReducers:function(e){e.addCase(u.pending,(function(e,t){console.log("saveProductAsync",e,t),e.status={id:t.meta.arg.id,status:"loading"}})).addCase(b.fulfilled,(function(e,t){e.products||(e.products={}),e.products[t.payload.collectionId]||(e.products[t.payload.collectionId]=[]),e.products[t.payload.collectionId].push(t.payload)})).addCase(u.fulfilled,(function(e,t){e.error&&delete e.error,e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode?(console.log("action.payload",t.payload),delete t.payload.responseCode,e.products[t.payload.product.collectionId]?e.products[t.payload.product.collectionId]=e.products[t.payload.product.collectionId].map((function(e){return e.id===t.payload.product.id?t.payload.product:e})):e.products[t.payload.product.collectionId]=[t.payload.product],console.log("so now ",t.payload.product.collectionId,"is ",e.products[t.payload.product.collectionId])):e.error=t.payload})).addCase(j.fulfilled,(function(e,t){var n;(e.status="idle",console.log("loading products",t.payload),t.payload.responseCode<202&&0!==t.payload.responseCode)?(delete t.payload.responseCode,(!e.products||typeof(null===e||void 0===e?void 0:e.products)!=Array||(null===e||void 0===e||null===(n=e.products)||void 0===n?void 0:n.length)<=0)&&(e.products=[]),t.payload.products[t.payload.collectionId]?t.payload.products.forEach((function(n){e.products[t.payload.collectionId].find((function(e){return e.id===n.id}))||e.products[t.payload.collectionId].push(n)})):e.products[t.payload.collectionId]=t.payload.products):e.error=t.payload})).addCase(l.b,(function(e,t){e.products={}}))}}),f=p.actions,O=(f.createProduct,f.cancelCreateProduct);t.c=p.reducer},55:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return m}));var r=n(15),a=n(9),o=n.n(a),c=n(14),i=n(21),s=n(58),l=n(31),d=n(47),u={fabrics:void 0,status:"idle",error:void 0},b=function(e){var t=d.getEnvironment(window.location.origin);e.image&&"string"===typeof e.image&&0!==e.image.indexOf("http")&&(e.image=t.imageServer+e.image)},j=Object(c.b)("fabric/create",function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:Object(s.a)(),brandId:t.brandId,editing:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(c.b)("fabric/save",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t&&t.editing&&delete t.editing,e.next=3,Object(i.b)({resource:"fabric",fabricId:t.id,params:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=Object(c.b)("fabric/load",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)({resource:"fabric"});case 2:return n=e.sent,console.log("fabrics result",n),n.brandId=t.brandId,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=Object(c.c)({name:"fabric",initialState:u,reducers:{createFabric:function(e,t){e.fabrics||(e.fabrics={}),e.fabrics[t.payload.brandId]||(e.fabrics[t.payload.brandId]=[]),console.log("state.fabrics[action.payload.brandId]",e.fabrics[t.payload.brandId]);var n=JSON.parse(JSON.stringify(e.fabrics[t.payload.brandId])).concat([{id:Object(s.a)(),brandId:t.payload.brandId}]);console.log("newArray",n),e.fabrics[t.payload.brandId]=n},cancel:function(e,t){e.fabrics&&(e.fabrics=e.fabrics.filter((function(e){return e.id!==t.payload.id}))),Object(i.a)({resource:"fabric",method:"delete",params:{id:t.payload.id}})}},extraReducers:function(e){e.addCase(j.pending,(function(e,t){console.log("createFabricAsync pending")})).addCase(j.fulfilled,(function(e,t){console.log("createFabricAsync 1",t.payload),e.fabrics||(e.fabrics={}),e.fabrics[t.payload.brandId]||(e.fabrics[t.payload.brandId]=[]),e.fabrics[t.payload.brandId].push(t.payload)})).addCase(p.pending,(function(e,t){e.status={id:t.meta.arg.id,status:"loading"}})).addCase(p.fulfilled,(function(e,t){e.error&&delete e.error,e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode?(delete t.payload.responseCode,b(t.payload.fabric),e.fabrics?e.fabrics=e.fabrics.map((function(e){return e.id===t.payload.fabric.id?t.payload.fabric:e})):e.fabrics=[t.payload.fabrics]):e.error=t.payload.error})).addCase(f.fulfilled,(function(e,t){var n;e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode?(delete t.payload.responseCode,e.fabrics||(e.fabrics=[]),e.fabrics[t.payload.brandId]||(e.fabrics[t.payload.brandId]=[]),t.payload.fabrics.forEach((function(n){e.fabrics[t.payload.brandId].find((function(e){return e.id===n.id}))||e.fabrics[t.payload.brandId].push(n)}))):e.error=t.payload,null===e||void 0===e||null===(n=e.fabrics)||void 0===n||n.forEach((function(e){b(e)}))})).addCase(l.b,(function(e,t){delete e.fabrics}))}}),g=O.actions,h=g.createFabric,m=g.cancel;t.d=O.reducer},56:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return m}));var r=n(15),a=n(9),o=n.n(a),c=n(14),i=n(21),s=n(58),l=n(31),d=n(47),u={fournitures:void 0,status:"idle",error:void 0},b=function(e){var t=d.getEnvironment(window.location.origin);e.image&&"string"===typeof e.image&&0!==e.image.indexOf("http")&&(e.image=t.imageServer+e.image)},j=Object(c.b)("fourniture/create",function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:Object(s.a)(),brandId:t.brandId,editing:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(c.b)("fourniture/save",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t&&t.editing&&delete t.editing,e.next=3,Object(i.b)({resource:"fourniture",fournitureId:t.id,params:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=Object(c.b)("fourniture/load",function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)({resource:"fourniture"});case 2:return n=e.sent,console.log("fournitures result",n),n.brandId=t.brandId,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=Object(c.c)({name:"fourniture",initialState:u,reducers:{createFourniture:function(e,t){e.fournitures||(e.fournitures={}),e.fournitures[t.payload.brandId]||(e.fournitures[t.payload.brandId]=[]),console.log("state.fournitures[action.payload.brandId]",e.fournitures[t.payload.brandId]);var n=JSON.parse(JSON.stringify(e.fournitures[t.payload.brandId])).concat([{id:Object(s.a)(),brandId:t.payload.brandId}]);console.log("newArray",n),e.fournitures[t.payload.brandId]=n},cancel:function(e,t){e.fournitures&&(e.fournitures=e.fournitures.filter((function(e){return e.id!==t.payload.id}))),Object(i.a)({resource:"fourniture",method:"delete",params:{id:t.payload.id}})}},extraReducers:function(e){e.addCase(j.pending,(function(e,t){console.log("createFournitureAsync pending")})).addCase(j.fulfilled,(function(e,t){console.log("createFournitureAsync 1",t.payload),e.fournitures||(e.fournitures={}),e.fournitures[t.payload.brandId]||(e.fournitures[t.payload.brandId]=[]),e.fournitures[t.payload.brandId].push(t.payload)})).addCase(p.pending,(function(e,t){e.status={id:t.meta.arg.id,status:"loading"}})).addCase(p.fulfilled,(function(e,t){e.error&&delete e.error,e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode?(delete t.payload.responseCode,b(t.payload.fourniture),e.fournitures?e.fournitures=e.fournitures.map((function(e){return e.id===t.payload.fourniture.id?t.payload.fourniture:e})):e.fournitures=[t.payload.fournitures]):e.error=t.payload.error})).addCase(f.fulfilled,(function(e,t){var n,r;(e.status="idle",t.payload.responseCode<202&&0!==t.payload.responseCode)?(delete t.payload.responseCode,e.fournitures||(e.fournitures=[]),e.fournitures[t.payload.brandId]||(e.fournitures[t.payload.brandId]=[]),null===(r=t.payload.fournitures)||void 0===r||r.forEach((function(n){e.fournitures[t.payload.brandId].find((function(e){return e.id===n.id}))||e.fournitures[t.payload.brandId].push(n)}))):e.error=t.payload;null===e||void 0===e||null===(n=e.fournitures)||void 0===n||n.forEach((function(e){b(e)}))})).addCase(l.b,(function(e,t){delete e.fournitures}))}}),g=O.actions,h=g.createFourniture,m=g.cancel;t.d=O.reducer},76:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/default-avatar.522560c8.png"}},[[156,1,2]]]);
//# sourceMappingURL=main.d78efb0b.chunk.js.map